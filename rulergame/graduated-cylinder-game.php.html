<!doctype html>
<html>
<head>
    
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta charset="UTF-8">
    <title>The Graduated Cylinder Game - Learn and Practice Reading a Graduated Cylinder</title>
	
<meta name="description" content="Learn and practice reading 10ml, 25ml, 50ml and 100ml graduated cylinders with our fun and easy graduated cylinder game.">
<meta property="og:title" content="The Graduated Cylinder Game - Learn and Practice Reading a Graduated Cylinder">
<meta property="og:description" content="Learn and practice reading 10ml, 25ml, 50ml and 100ml graduated cylinders with our fun and easy graduated cylinder game.">
<meta property="og:image" content="https://www.rulergame.net/images/og-graduated-cylinder-game.png">
<meta property="og:url" content="https://www.rulergame.net/graduated-cylinder-game.php">
<meta property="og:type" content="website">
<link rel="canonical" href="graduated-cylinder-game.php.html">
	
    
    <link rel="stylesheet" href="assets/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/css/site.css">
    <link rel="stylesheet" href="assets/css/animate.min.css">
    <link rel="stylesheet" href="graduated-cylinder/css/graduated_cylinder.css">

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async="" src="gtag/js?id=G-XE0GQQH6FP"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-XE0GQQH6FP');
</script>
<!-- AdThrive Head Tag Manual -->
<script data-no-optimize="1" data-cfasync="false">
(function(w, d) {
	w.adthrive = w.adthrive || {};
	w.adthrive.cmd = w.
	adthrive.cmd || [];
	w.adthrive.plugin = 'adthrive-ads-manual';
	w.adthrive.host = 'ads.adthrive.com';var s = d.createElement('script');
	s.async = true;
	s.referrerpolicy='no-referrer-when-downgrade';
	s.src = 'https://' + w.adthrive.host + '/sites/6441cbd48ef14750ba9ecca1/ads.min.js?referrer=' + w.encodeURIComponent(w.location.href) + '&cb=' + (Math.floor(Math.random() * 100) + 1);
	var n = d.getElementsByTagName('script')[0];
	n.parentNode.insertBefore(s, n);
})(window, document);
</script>
<!-- End of AdThrive Head Tag -->
    
</head>
<body>
<!-- Navbar -->
<div class="z100">
    <div class="w3-bar w3-pale-green w3-card w3-left-align w3-large">
        <a class="w3-bar-item w3-button w3-padding-large rulergame-dark-green" href="javascript:void(0);" onclick="toggleNavMenu()" title="Toggle Navigation Menu">Menu</a>
        <div id="topBanner"><a href="index.htm"><img src="images/rulergame.gif" id="topBannerImage" alt="The Ruler Game - Learn to read a ruler"></a></div>
    </div>
    <div id="NavMenu" class="w3-dropdown-content w3-bar-block w3-border w3-large rulergame-dark-green z100">
	<a href="index.htm" class="w3-bar-item w3-button w3-padding-large">Home</a>
        <a href="javascript:void(0);" class="w3-bar-item w3-button w3-padding-large" onclick="toggleCategory('measuringGames')">Measuring Games</a>
        <div id="measuringGames" class="w3-hide w3-bar-block rulergame-submenu">
            <a href="new-english-ruler-game.php.html" class="w3-bar-item w3-button w3-padding-large">Inch Ruler Game</a>
            <a href="new-metric-ruler-game.php.html" class="w3-bar-item w3-button w3-padding-large">Metric Ruler Game</a>
            <a href="micrometer-game.php.html" class="w3-bar-item w3-button w3-padding-large">Micrometer Game</a>
            <a href="metric-micrometer-game.php.html" class="w3-bar-item w3-button w3-padding-large">Metric Micrometer Game</a>
			<a href="dial-caliper-game.php.html" class="w3-bar-item w3-button w3-padding-large">Dial Caliper Game</a>
			<a href="vernier-caliper-game.php.html" class="w3-bar-item w3-button w3-padding-large">Vernier Caliper Game</a>
			<a href="graduated-cylinder-game.php.html" class="w3-bar-item w3-button w3-padding-large">Graduated Cylinder Game</a>
			<a href="architectural-scale-game.php.html" class="w3-bar-item w3-button w3-padding-large">Architectural Scale Game</a>
			<a href="machinist-ruler-game.php.html" class="w3-bar-item w3-button w3-padding-large">Machinist Ruler Game</a>
			<a href="triple-beam-balance-game.php.html" class="w3-bar-item w3-button w3-padding-large">Triple Beam Balance Game</a>
        </div>
        <a href="javascript:void(0);" class="w3-bar-item w3-button w3-padding-large" onclick="toggleCategory('timeGames')">Time and Temperature Games</a>
        <div id="timeGames" class="w3-hide w3-bar-block rulergame-submenu">
            <a href="clock-game.php.html" class="w3-bar-item w3-button w3-padding-large">Clock Game</a>
            <a href="military-time-game.php.html" class="w3-bar-item w3-button w3-padding-large">Military Time Game</a>
			<a href="thermometer-game.php.html" class="w3-bar-item w3-button w3-padding-large">Thermometer Reading Game</a>
            <a href="temperature-conversion-game.php.html" class="w3-bar-item w3-button w3-padding-large">Temperature Conversion Game</a>
        </div>
        <a href="javascript:void(0);" class="w3-bar-item w3-button w3-padding-large" onclick="toggleCategory('moneyGames')">Money & Life Games</a>
        <div id="moneyGames" class="w3-hide w3-bar-block rulergame-submenu">
            <a href="money-game.php.html" class="w3-bar-item w3-button w3-padding-large">Money Counting Game</a>
            <a href="shopping-money-counting-game.php.html" class="w3-bar-item w3-button w3-padding-large">Shopping Money Counting Game</a>
            <a href="counting-back-change-game.php.html" class="w3-bar-item w3-button w3-padding-large">Counting Back Change Game</a>
			<a href="blood-pressure-game.php.html" class="w3-bar-item w3-button w3-padding-large">Blood Pressure Game</a>
			<a href="stadiometer-game.php.html" class="w3-bar-item w3-button w3-padding-large">Stadiometer Game</a>
			<a href="physician-scale-game.php.html" class="w3-bar-item w3-button w3-padding-large">Physician Scale Game</a>
			<a href="cooking-conversions-game.php.html" class="w3-bar-item w3-button w3-padding-large">Cooking Conversions Game</a>
        </div>
    </div>
</div>

  

<div class="split-screen-layout">  
    <div class="section section-50">  
        <div class="canvas-area">
        
            <div id="canvasArea">
                <canvas id="playerCanvas"></canvas>
                <!-- <canvas id="rulerCanvas" width="900" height="500" style="border:2px solid #000000; background-color:#fff"></canvas> -->
                <canvas id="myCanvas" width="350" height="500" style="border:2px solid #000000; background-color:#fff"></canvas>
                <!-- <canvas id="myCanvas" style="border: 1px solid #c3c3c3;">
                    Your browser does not support the HTML5 canvas tag.
                </canvas> -->
              
                <div id="strikeBoard"><span></span></div>
                <div id="cheerBoard"><span></span></div>
        
               
            </div>    
        </div>
    </div>
	
    <div class="section section-50">
                <div class="container-fluid setting-section">
            <div class="">
                <!-- <button class="btn btn-game-start" id= "btnStart">
                Play Game
                </button> -->
                <div id="buttonBar">
                <input type="button" id="btnStart" value="Play Game">
                <input type="button" id="btnSettings" value="Settings">
                </div>
            </div>
          
            <div id="preferencesBox" class="w3-card w3-pale-yellow w3-border w3-border-yellow">
                <span onclick="$('#preferencesBox').slideToggle();" class="w3-button w3-display-topright">X</span>
                <header class="w3-container w3-yellow">
                <h5>Settings</h5>
                </header>
                <div class="w3-padding-small">
                <div id="timerBox" class="w3-row">
                    <div class="w3-col s6 w3-right-align rulergame-align-vert"><strong>Timer:&nbsp;</strong></div>
                    <div class="w3-col s6">
                        <select id="stgTimer" class="w3-select w3-border">
                            <option value="On" selected="">On</option>
                            <option value="Off">Off</option>
                        </select>  
                    </div>
                </div>
                <div id="soundsBox" class="w3-row">
                    <div class="w3-col s6 w3-right-align rulergame-align-vert"><strong>Sounds:&nbsp;</strong></div>
                    <div class="w3-col s6">
                        <select id="stgSounds" class="w3-select w3-border">
                            <option value="On" selected="">On</option>
                            <option value="Off">Off</option>
                        </select>  
                    </div>
                </div>
        
                <div id="modeSelection" class="w3-row">
                    <div class="w3-col s6 w3-right-align rulergame-align-vert"><strong>Scale:&nbsp;</strong></div>
                    <div class="w3-col s6">
                        <select id="stgScale" class="w3-select w3-border">
                            <option value="Random">Random</option>
                            <option value="10ml" selected="">10ml</option>
                            <option value="25ml">25ml</option>
                            <option value="50ml">50ml</option>
                            <option value="100ml">100ml</option>
                        </select>  
                    </div>
                </div>
    
                
                <div id="modeSelection" class="w3-row">
                    <div class="w3-col s6 w3-right-align rulergame-align-vert"><strong>Mode:&nbsp;</strong></div>
                    <div class="w3-col s6">
                        <select id="stgMode" class="w3-select w3-border">
                            <option value="Game" selected="">Game</option>
                            <option value="Trainer">Training</option>
                            <option value="Type">Type</option>
                        </select>  
                    </div>
                </div>
                
                
                </div>
                <!-- <div id="rulerLengthMessage" class="w3-row"></div> -->
            </div>
            
            <div id="questionBar">
                <div id="txtQuestion"><span>&nbsp;</span></div>
            </div>
			
			<div id="detailedControl" class="w3-container w3-padding">
                <div class="w3-row">
                    <div id="verniersmall" class="">
                        <div class="w3-row number-input"> 
                            <div id="labelverniersmall" class=""><b>Meniscus</b></div>
                            <div class="">
                            <button class="spinner decrement" id="btnvernierdecrement">-</button>
                                <input id="verniersmallControl" name="sleevemain" value="00000" onchange="DrawSleeveMainChange()">
                            <button class="spinner increment" id="btnvernierincrement">+</button> 
                            </div>
                        </div>          
                    </div>
                </div>
            </div> 
            
      
        <div class="typecanvs-area">
            <canvas id="typeCanvas"></canvas>
        </div>
        <div id="resultsBar" class="w3-container">
            <div class="w3-row">
                <div id="displayBoard" class="w3-twothird w3-center">
                    <div id="scoreColumn"><div id="txtScore"></div><div class="resultsBarLabel">SCORE</div></div>
                    <div id="timerColumn"><canvas id="timerCanvas"></canvas><div class="resultsBarLabel">TIME</div></div>
                    <div id="levelColumn"><canvas id="levelCanvas"></canvas><div class="resultsBarLabel">LEVEL</div></div>
                    <div id="strikesColumn"><div id="txtStrikes"></div><div class="resultsBarLabel">STRIKES</div></div>                
                </div>
            </div>
        <div id="submitColumn" class="w3-third w3-center"> 
            <input type="button" id="btnSubmit" value="Submit Answer">
			<br>
        </div>
		</div>
		</div>
        </div>
</div>
<div id="instructionsBox" class="w3-container split-screen-instructions">
    <h1 align="center">The Graduated Cylinder Game - Learn and Practice Reading a Graduated Cylinder</h1>
	
                    <h2>Instructions:</h2>
                    <ul class="w3-ul">
                        <li>With this game you can learn and practice how to read a graduated cylinder (also called a measuring cylinder or mixing cylinder).</li>
						<li>You can choose between a 10ml, 25ml, 50ml, and 100ml graduated cylinder.</li>
                        <li>This game can be played using a mouse or a touchscreen.</li>
                        <li>Press the <em><strong>Play Game</strong></em> button to begin playing the game.</li>
                        <li>A measurement to select will appear above the graduated cylinder.</li>
                        <li><b>Computer:</b> Move your mouse up and down the graduated cylinder and click when you think the meniscus is at the right height.
						<li><b>Tablet or phone:</b> Tap your finger on the spot you believe is right.</li>
						<li>Then use the minus and plus icons below the graduated cylinder to precisely control the level of the meniscus.</li>
						<li>When you believe you have the right answer, click/tap the "Submit Answer" button below the graduated cylinder.</li>
                        <li>For each correct answer, you will be awarded points. Your score is displayed on the left side of the Results Bar that appears below the graduated cylinder.</li>
                        <li>Points are awarded based on the following table.
                              <table class="w3-table w3-bordered">
                                <tr><th>Level</th><th>Time Limit</th><th>Points</th></tr>
                                <tr><td>1</td><td>10 seconds</td><td>10</td></tr>
                                <tr><td>2</td><td>9 seconds</td><td>20</td></tr>
                                <tr><td>3</td><td>8 seconds</td><td>30</td></tr>
                                <tr><td>4</td><td>7 seconds</td><td>40</td></tr>
                                <tr><td>5</td><td>6 seconds</td><td>50</td></tr>
                                <tr><td>6</td><td>5 seconds</td><td>60</td></tr>
                                <tr><td>7</td><td>4 seconds</td><td>70</td></tr>
                                <tr><td>8</td><td>3 seconds</td><td>80</td></tr>
                                <tr><td>9</td><td>2 seconds</td><td>90</td></tr>
                                <tr><td>10</td><td>1 second</td><td>100</td></tr>
                              </table></li>
                        <li>Each time you correctly guess 5 measurements, you will advance to the next level. Your current level is indicated in the Results Bar below the graduated cylinder.</li>
                        <li>The timer is represented to the right of the score in the Results Bar. As time passes, the bar will get shorter.</li>
                        <li>If you have not submitted a measurement when the time runs out, you will receive a strike.</li>
                        <li>For each incorrect answer, you will receive a strike. After three strikes, your game is over. The number of strikes you have received is indicated on the right side of the Results Bar below the graduated cylinder.</li>
                        <li>Click the <em><strong>Settings</strong></em> button to adjust your preferences for the game.
                            <ul>
                                <li><strong>Timer:</strong> The default setting is On. Select Off to have unlimited time to submit your answer.</li>
                                <li><strong>Sounds:</strong> The default setting is On. Select Off to disable all game sounds.</li>
								<li><strong>Scale:</strong> Choose between graduated cylinders of different sizes. 10ml, 25ml, 50ml, 100ml, or random.</li>
                                <li><strong>Mode:</strong> by default, you're in "<i>game mode</i>." If you want to make the game easier, you can select "<i>Training</i>" mode. In the training mode, you can see the current value of the graduated cylinder below the cylinder.</li>
                                <li>All the settings will revert to default and your score will reset if you refresh your browser.</li>
                            </ul></li>
                    </ul>
	
</div>
  
<br>
  
<footer class="w3-container w3-padding rulergame-dark-green">  
            <div class="w3-row-padding">

              <div class="w3-third">
                <h3>MEASURING GAMES</h3>
                <ul class="w3-ul">
                  <li class="w3-padding-16">
                    <a href="new-english-ruler-game.php.html" class="w3-text-white w3-hover-opacity w3-large rulergame-no-underline">New Inch Ruler Game</a><br>
                  </li>
				  <li class="w3-padding-16">
                    <a href="new-metric-ruler-game.php.html" class="w3-text-white w3-hover-opacity w3-large rulergame-no-underline">New Metric Ruler Game</a><br>
                  </li>
                  <li class="w3-padding-16">
                    <a href="v2-standard-english-ruler-game.php.html" class="w3-text-white w3-hover-opacity w3-large rulergame-no-underline">Original Inch Ruler Game</a><br>
                  </li>
				  <li class="w3-padding-16">
                    <a href="micrometer-game.php.html" class="w3-text-white w3-hover-opacity w3-large rulergame-no-underline">Inch Mictometer Game</a><br>
                  </li>
				  <li class="w3-padding-16">
                    <a href="metric-micrometer-game.php.html" class="w3-text-white w3-hover-opacity w3-large rulergame-no-underline">Metric Micrometer Game</a><br>
                  </li>
                  <li class="w3-padding-16">
                    <a href="v2-metric-ruler-game.php.html" class="w3-text-white w3-hover-opacity w3-large rulergame-no-underline">Original Metric Ruler Game</a><br>
                  </li>
				  <li class="w3-padding-16">
                    <a href="dial-caliper-game.php.html" class="w3-text-white w3-hover-opacity w3-large rulergame-no-underline">Dial Caliper Game</a><br>
                  </li>
				  <li class="w3-padding-16">
                    <a href="vernier-caliper-game.php.html" class="w3-text-white w3-hover-opacity w3-large rulergame-no-underline">Vernier Caliper Game</a><br>
                  </li>
                  <li class="w3-padding-16">
                    <a href="graduated-cylinder-game.php.html" class="w3-text-white w3-hover-opacity w3-large rulergame-no-underline">Graduated Cylinder Game</a><br>
                  </li>
				  <li class="w3-padding-16">
                    <a href="architectural-scale-game.php.html" class="w3-text-white w3-hover-opacity w3-large rulergame-no-underline">Architectural Scale Game</a><br>
                  </li>
				  <li class="w3-padding-16">
                    <a href="machinist-ruler-game.php.html" class="w3-text-white w3-hover-opacity w3-large rulergame-no-underline">Machinist Ruler Game</a><br>
                  </li>
				  <li class="w3-padding-16">
                    <a href="triple-beam-balance-game.php.html" class="w3-text-white w3-hover-opacity w3-large rulergame-no-underline">Triple Beam Balance Game</a><br>
                  </li>
                </ul>
              </div>

              <div class="w3-third">
                <h3>TIME AND TEMPERATURE GAMES</h3>
                <ul class="w3-ul">
                  <li class="w3-padding-16">
                    <a href="clock-game.php.html" class="w3-text-white w3-hover-opacity w3-large rulergame-no-underline">Clock Game</a><br>
                  </li>
				  <li class="w3-padding-16">
                    <a href="military-time-game.php.html" class="w3-text-white w3-hover-opacity w3-large rulergame-no-underline">Military Time Game</a><br>
                  </li>
				  <li class="w3-padding-16">
                    <a href="thermometer-game.php.html" class="w3-text-white w3-hover-opacity w3-large rulergame-no-underline">Thermometer Reading Game</a><br>
                  </li>
				  <li class="w3-padding-16">
                    <a href="temperature-conversion-game.php.html" class="w3-text-white w3-hover-opacity w3-large rulergame-no-underline">Temperature Conversion Game</a><br>
                  </li>
				</ul>
				<h3>MONEY AND LIFE GAMES</h3>
				<ul class="w3-ul">
				  <li class="w3-padding-16">
                    <a href="money-game.php.html" class="w3-text-white w3-hover-opacity w3-large rulergame-no-underline">Money Counting Game</a><br>
                  </li>
				  <li class="w3-padding-16">
                    <a href="shopping-money-counting-game.php.html" class="w3-text-white w3-hover-opacity w3-large rulergame-no-underline">Shopping Money Counting Game</a><br>
                  </li>
				  <li class="w3-padding-16">
                    <a href="counting-back-change-game.php.html" class="w3-text-white w3-hover-opacity w3-large rulergame-no-underline">Counting Back Change Game</a><br>
                  </li>
				  <li class="w3-padding-16">
                    <a href="blood-pressure-game.php.html" class="w3-text-white w3-hover-opacity w3-large rulergame-no-underline">Blood Pressure Game</a><br>
                  </li>
				  <li class="w3-padding-16">
                    <a href="stadiometer-game.php.html" class="w3-text-white w3-hover-opacity w3-large rulergame-no-underline">Stadiometer Game</a><br>
                  </li>
				  <li class="w3-padding-16">
                    <a href="physician-scale-game.php.html" class="w3-text-white w3-hover-opacity w3-large rulergame-no-underline">Physician Scale Game</a><br>
                  </li>
				  <li class="w3-padding-16">
                    <a href="cooking-conversions-game.php.html" class="w3-text-white w3-hover-opacity w3-large rulergame-no-underline">Cooking Conversions Game</a><br>
                  </li>
                </ul>
              </div>

              <div class="w3-third">
                <h3>CONTACT ME</h3>
                  <p class="w3-xxlarge w3-margin-top w3-margin-bottom">
                    <a href="privacy-policy.php.html#contact" class="w3-text-white w3-hover-opacity"><img src="contact-button.png" alt="Contact button"></a>
                    <a href="https://www.facebook.com/RulerGame/" class="w3-text-white w3-hover-opacity" target="_blank"><img src="facebook-button.png" alt="Facebook button"></a>
                  </p>                   
                  <p>Spears Technologies, Inc.<br>
                    Attn: The Ruler Game<br>
                    576 N. Birdneck Rd. #178<br>
                    Virginia Beach, VA 23451</p>
              </div>

            </div>
<div class="rulergame-dark-green w3-center w3-padding w3-border-top">Copyright &copy; 2025  by RulerGame.net and Ricky D. Spears. All Rights Reserved. <a href="privacy-policy.php.html" class="w3-text-white w3-hover-opacity">Privacy Policy</a><br><br><br></div>
</footer>


<script>
    var admin_settings = "";
        var game_id = "";
</script>

<script src="assets/js/jquery.min.js">  </script>
<script src="assets/js/jquery-3.6.0.min.js">  </script>
<script src="assets/js/bootstrap.min.js">  </script>
<script src="graduated-cylinder/js/graduated_cylinder.js">  </script>
<script type='text/javascript'>
	var msrSelected = 0;
	var gameStarted = 0;
    /*drawing offset*/
    var scale;
    var xOffset;
    var yOffset = 10;
    var dragMode = 0; //0 == none, 1 = world, 2 = vernier, 3 = object

    var prev_mx, prev_my; //prev mouse positions
    // var bgColor = "rgb(0,64,84)";
    var bgColor = "rgb(255,255,255)";
    var fgColor = "orange";//rgb(255,255,255)";
    const scaleColor = "black";
    const waterColor = "gray";
    const whiteColor = "white";

    var loadedItems = 0;
    const itemsToLoad = 3;
    
    var imgBase10 = new Image();
    imgBase10.src = "/graduated-cylinder/images/10ml.png"
    imgBase10.onload = itemloaded;
    var imgBase25 = new Image();
    imgBase25.src = "/graduated-cylinder/images/25ml.png"
    imgBase25.onload = itemloaded;
    var imgBase50 = new Image();
    imgBase50.src = "/graduated-cylinder/images/50ml.png"
    imgBase50.onload = itemloaded;
    var imgBase100 = new Image();
    imgBase100.src = "/graduated-cylinder/images/100ml.png"
    imgBase100.onload = itemloaded;

    var cr; 

    const rulerWidthPixel = 915;
    const majorTickLengthPixels = 22;
    const minorTickLengthPixels = 13;
    const vernierMajorTickLengthPixels = 10;
    const vernierMinorTickLengthPixels = 6;
    const mainScaleLengthPixels = 600; 

    const vernierScaleHeightPixels = 397; //354;

    const unit = "cm";
		
    var vernierScaleDivisions = 100;
	var vernierScaleDivisionsForInch = 100;
    var mainScaleDivisions = 50;
    var msd_pixels = mainScaleLengthPixels / mainScaleDivisions;
    var vsd_pixels = mainScaleLengthPixels / mainScaleDivisions;
	
    var vernierScaleLengthPixels = 50 + vsd_pixels * vernierScaleDivisions + 50 ;
	
    var precision = 3;
    // var LC = 0;
    var msr = 0;
    var vsr = 0;
    var zeroError = 0;
	
    const scaleOriginX = 32; //jaw Left position
    const scaleOriginY0 = 105; //105; //scale top position
    const scaleOriginY = 440; //162; //scale bottom position
    const offsetOriginX = 12; //distance of scale origin level from scaleOriginX
    const offsetOriginY = 0; //distance of scale origin level from scaleOriginY
    const vernierOriginX = 55; //distance of vernier origin in pixel in vernier.png
    const vernierOriginY = 204; //161;

    var displayInfo = false;
    var objectWidthPixel = 25;
    var drawSubDivision = false;
    var randomZeroError = true;
    var randomMainScaleDivisions = true;
    var randomVernierScaleDivision = true;
    var randomObjectWidthPixel = true;
    var input_answer = "00000";

    var canvas = document.getElementById("myCanvas");
    var canvasArea = document.getElementById("canvasArea");

    let detailsOpenMode = navigator.userAgent;
    let regexp = /android|iphone|kindle|ipad/i;

    let isMobileDevice = regexp.test(detailsOpenMode);

	//canvas.width = window.innerWidth;
	//canvas.height = parseInt(window.width * 5 / 9, 10);
    {
        scale = 1.0;
		//if (getBaseImage().height > canvas.height - 150)
		{
			scale = (canvas.height - 150) / getBaseImage().height;
			scale = window.innerWidth / 350;
		}
		
		if (scale > 1.0)
			scale = 1;
		
    }
     
    var ctx = canvas.getContext("2d");
    ctx.font = "30px Arial";
    xOffset = (canvas.width - 128/*getBaseImage().width*/) / 2; //jaw Left position

	//Add event listeners
    window.addEventListener('resize', function(ev) { return resize(ev); });
    paint();
    
	function itemloaded()
	{
        loadedItems++;
        if(loadedItems == itemsToLoad)
		{			
			//console.log("Item loaded....");
			var defaultPrevent = function(e){ e.preventDefault() };
			
			canvas.addEventListener("mousedown", defaultPrevent);
			canvas.addEventListener("mousemove", defaultPrevent);
			
			document.addEventListener('touchstart', mousePressed, false);
			document.addEventListener('touchmove', mouseDragged, false); 
			document.addEventListener('touchend', mouseReleased, false);			
			document.addEventListener("mousemove", mouseDragged, false);
			document.addEventListener("mousedown", mousePressed, false);
			document.addEventListener("mouseup", mouseReleased, false); 

            canvas.addEventListener("mousewheel", mouseWheelMoved);
            window.addEventListener('keydown', onKeyEvent, false);
			window.addEventListener("orientationchange", resize());
			//window.addEventListener("onresize", resize());
			
            var typeCanvas = document.getElementById('typeCanvas');
            typeCanvas.addEventListener('click', getMouseClick, false);
        }
		
		

        paint();
    }

    function resize()
	{
        if(window.innerWidth < 10 || window.innerHeight < 10)
			return;
		        
		var width;
		var height;
		width = window.innerWidth;
		height = window.innerHeight;

        {
            scale = 1.0;

			{
				scale = (canvas.height - 150) / getBaseImage().height;
				scale = window.innerWidth / 350;
			}
			if (scale > 1.0)
				scale = 1.0;
        }
        
// 		msr = 0;
		//console.log("resize scale = " + scale);
        update();
    }

    init();

    function init()
	{
        resize();
    }


    function translateVernier(div)
	{
		if (div == 0)
		{
			//console.log("NONE");
			return;
		}
		msr += div;
		
		if(msr <= 0)
		{
			msr = 0;
		}
		
		if(msr + getMinScale() >= getMainScaleDivisions())
		{
			msr = getMainScaleDivisions() - getMinScale();
		}

        update();
    }

    function update(ev)
	{
        if(ev) 
			console.log(ev.value.toFixed(2));
        
        paint();
    }

    var set_input_answer = function (val) {
        var num_cnt = 0;

        num_cnt  = 3
        if (val == "Back") {
            input_answer = "" + parseInt(parseInt(input_answer) / 10);
            for (var i = input_answer.length; i < num_cnt; i ++) {
                input_answer = "0" + input_answer;
            }
        } else {
            input_answer += val;
            input_answer = input_answer.substring(input_answer.length - num_cnt);
        }

        console.log(input_answer);
    }
    

    function paint()
	{
        ctx.lineWidth = 1.5;
        ctx.fillStyle = bgColor;
        ctx.strokeStyle = fgColor;
        ctx.fillRect(0, 0, canvas.width, canvas.height);
		
        ctx.font = '10pt sans-serif';

		{
			scale = 1.0;
			{
				scale = (canvas.height - 150) / getBaseImage().height;
				scale = window.innerWidth / 350;
				if (scale > 1.0)
					scale = 1.0;
			}
		}
        ctx.translate(xOffset , yOffset);
        ctx.save();

        let shift = parseInt(msr, 10) * getMsdPixels();
		
        //draw Base of gauge
        ctx.drawImage(getBaseImage(), 0, 0, getBaseImage().width, getBaseImage().height*1.15);

        ctx.translate(scaleOriginX, scaleOriginY + offsetOriginY);
        ctx.fillStyle = scaleColor;
        ctx.strokeStyle = scaleColor;
        
        //////////    draw meniscus
        ctx.strokeStyle = scaleColor;
        ctx.fillStyle = waterColor;

        var cylinderWidth = getCylinderWidth();
        var msd_pixels = getMsdPixels();
        var meniscusRadius = (msd_pixels * msd_pixels + cylinderWidth * cylinderWidth / 4) / (2 * msd_pixels);
        x = 0;
        offsetCenterY = meniscusRadius ;
        y = - shift - offsetCenterY + msd_pixels;
        var centerx = x + cylinderWidth / 2;
        var centery = y;
        var start_angle = Math.asin((meniscusRadius - msd_pixels) / meniscusRadius);
        ctx.beginPath();
        ctx.arc(centerx, centery, meniscusRadius, start_angle, Math.PI - start_angle);
        ctx.lineTo(0, msd_pixels);
        ctx.lineTo(cylinderWidth, msd_pixels);
        ctx.fill();

        ///////draw ruler on main scale
        ctx.strokeStyle = scaleColor;
        ctx.fillStyle = scaleColor;
        y = 0;
        x = 0;
        let ticklength = 0;
        let labelGap = getLabelGap();
        
        // for the ruler...
        var mainScaleDivisions = getMainScaleDivisions();
        var nTickType;
        var nDelta = 0;
        for (let i = 0; i <= mainScaleDivisions; i++)
        {
            nTickType = getTickLengthLevel(i);
            if (nTickType == 0)
                ticklength = majorTickLengthPixels;
            else if (nTickType == 1)
                ticklength = (majorTickLengthPixels + minorTickLengthPixels) / 2;
            else if (nTickType == 2)
                ticklength = minorTickLengthPixels;
            
			else if (nTickType == -1)
            {
            	nDelta ++;
                continue;
            }
            
            if (shift >= -1 * y + msd_pixels)
                ctx.strokeStyle = whiteColor;
            else
                ctx.strokeStyle = scaleColor;
				
            if (shift > -1 * y + msd_pixels)
                ctx.fillStyle = whiteColor;
            else
                ctx.fillStyle = scaleColor;
            
            drawLine(x, y, x + ticklength, y);
							
            if (i % labelGap == 0)
            {
                outString(x + majorTickLengthPixels + 3, y - 2, i * getMsdValue(), 0, 1);
            }
            y -= msd_pixels;
        }

		//ctx.strokestyle = scaleColor;
		//ctx.fillStyle = scaleColor;
        y -= (20 + msd_pixels * nDelta);
        if (stgScale == "100ml")
        	y += 3;
        outString(x + getCylinderWidth() / 2, y, stgScale, 1, 2);


        ////////////////
        ctx.fillStyle=fgColor;
        ctx.font = '12pt sans-serif';

        cr = getCorrectedReading();
		
        if(displayInfo)
			drawInfo();
                    
        if (stgMode == "Trainer")
        {
			$("#verniersmallControl").val(formatValue(cr));
        }
		
        
		ctx.resetTransform();
        drawType()
        
        ctx.font = "bold 10px Arial";
        ctx.fillStyle='black';
        outString1(ctx, 3, 400+50, "Timer: " + stgTimer, 0, 0);
        outString1(ctx, 3, 415+50, "Scale: " + stgScale, 0, 0);
        outString1(ctx, 3, 430+50, "Mode: " + (stgMode=="Trainer"?"Training":stgMode), 0, 0);
    }


    function drawType(){
        var scale
       
			
        let canvas 
        var c = $("#typeCanvas");
        var ctx = c[0].getContext('2d');
        canvas = ctx.canvas
        if(stgMode == "Type"){
            ctx.canvas.height = 180;
            ctx.canvas.width = 320
            $(".number-input").hide();
		}
		else {
            ctx.canvas.height = 0;
            ctx.canvas.width = window.innerWidth > 1366 ? 600:window.innerWidth*0.8
            $(".number-input").show();
		}
        
        if (stgMode == "Type") {
            // show keyboards and input answer

            ctx.fillStyle = "rgb(255, 255, 255)";
            ctx.strokeStyle = "black";
            ctx.lineWidth = 1.5;
            ctx.fillRect(0 + 2, 0, canvas.width - 4, 150);
            // drawLine(ctx,0, canvas.height / 2 - 100, canvas.width , canvas.height / 2 - 100);
            //drawLine(-canvas.width / 2, canvas.height / 2 - 100, -canvas.width / 2, canvas.height / 2);
            //drawLine(-canvas.width / 2, canvas.height / 2, canvas.width / 2, canvas.height / 2);
            //drawLine(canvas.width / 2, canvas.height / 2 - 100, canvas.width / 2, canvas.height / 2);
            
            var input_type;
            console.log("randomQuestion====" + randomQuestion);
            
            
            
            if(1){
                show_num_start_x = 10; show_num_start_y = 10;
                // if (stgFraction == "Yes") {
                //     show_num_start_x -= 30;
                // }
                ctx.fillStyle = "rgb(200, 200, 200)";
                // ctx.fillRect(show_num_start_x + 40 * 3, show_num_start_y, 30, 35);
                
                ctx.fillRect(show_num_start_x + 40 * 0 + 45 + 20, show_num_start_y, 30, 35);
                ctx.fillRect(show_num_start_x + 40 * 1 + 45 + 20, show_num_start_y, 30, 35);
                // if (stgFraction == "Yes") 
                    ctx.fillRect(show_num_start_x + 40 * 2 + 47 + 20, show_num_start_y, 30, 35);
                // }{
                ctx.font = '20pt sans-serif';
                ctx.fillStyle = "rgb(0, 0, 0)"
                outString1(ctx, show_num_start_x + 40 * 2 + 47 + 7, show_num_start_y + 18, '.', 0, 0);
                    
                ctx.fillStyle = "rgb(0, 0, 0)";
                ctx.font = '18pt sans-serif';
                
                if(randomQuestion < 0){
                    outString1(ctx, show_num_start_x + 40 * (-1) + 45 + 40, show_num_start_y + 14, "-", 0, 0);
                }
                // outString(ctx, show_num_start_x + 40 * 4 + 35, show_num_start_y + 18, "feet", 0, 0);
               
                    outString1(ctx, show_num_start_x + 40 * 3 + 45 + 20, show_num_start_y + 18, 'ml', 0, 0);

                if (input_answer) {
                    // outString(ctx, show_num_start_x + 40 * 3 + 5, show_num_start_y + 15, input_answer[0], 0, 0);
                    outString1(ctx, show_num_start_x + 40 * 0 + 5 + 45 + 20, show_num_start_y + 15, input_answer[0], 0, 0);
                    outString1(ctx, show_num_start_x + 40 * 1 + 5 + 45 + 20, show_num_start_y + 15, input_answer[1], 0, 0);
                    // if (stgFraction == "Yes") {
                        outString1(ctx, show_num_start_x + 40 * 2 + 5 + 47 + 20, show_num_start_y + 15, input_answer[2], 0, 0);
                    // }
                }
            }
            ctx.font = '18pt sans-serif';
            ctx.lineWidth = 2;
            show_num_start_x = 50; show_num_start_y = 60;
            for (let i = 0; i <= 4; i++) {
                ctx.fillStyle = "rgb(255, 255, 255)";
                ctx.strokeStyle = "rgb(0, 0, 0)";
                ctx.strokeRect(show_num_start_x + 40 * i - 5, show_num_start_y, 30, 30);

                ctx.fillStyle = "rgb(0, 0, 0)";
                outString1(ctx, show_num_start_x + 40 * i, show_num_start_y + 15, i+1, 0, 0);
            }
            for (let i = 5; i <= 9; i++) {
                ctx.fillStyle = "rgb(255, 255, 255)";
                ctx.strokeStyle = "rgb(0, 0, 0)";
                ctx.strokeRect(show_num_start_x + 40 * (i-5) - 5, show_num_start_y+50, 30, 30);

                ctx.fillStyle = "rgb(0, 0, 0)";
                outString1(ctx, show_num_start_x + 40 * (i-5), show_num_start_y + 15+50, (i+1)%10, 0, 0);
            }
            ctx.fillStyle = "rgb(255, 255, 255)";
            ctx.strokeStyle = "rgb(0, 0, 0)";
            ctx.strokeRect(show_num_start_x + 40 * 5 - 10 + 10, show_num_start_y, 30, 30);

            ctx.fillStyle = "rgb(0, 0, 0)";
            outString1(ctx, show_num_start_x + 40 * 5 - 7 + 10, show_num_start_y + 15 - 3, "←", 0, 0);
        }
    }
    

    function drawInfo()
	{
        //draw MSD Info and VSD Info
        ctx.fillStyle = fgColor;
        ctx.strokeStyle = fgColor;
		
        //dra MSD Hint
        let x = scaleOriginX + offsetOriginX - msd_pixels * zeroError / vernierScaleDivisions + getMainScaleReading() * msd_pixels;
        let y = scaleOriginY - majorTickLengthPixels /*+ 43*/;
        let arrowSize = 5;

        //Draw VSD Hint
        let gappixel = msd_pixels * (msr + vsr / vernierScaleDivisions);
        x = scaleOriginX + gappixel + offsetOriginX + getVernierScaleReading() * vsd_pixels;
        y = scaleOriginY + majorTickLengthPixels /*+ 43*/;

        //Draw Screw gauge Reading
        let mr = getMeasuredReading();
        cr = getCorrectedReading();
        let ze = getZeroError();
        x = scaleOriginX - 1;
        y = imgVernier.height+5;
        let xs = [scaleOriginX, scaleOriginX - 34, rulerWidthPixel];
        let ys=[imgVernier.height + 5, 4, scaleOriginY - 70];
        for(let i = 0; i < 3; i++){
            x = xs[i];
            y = ys[i];
            drawLine(x, y - 8, x, y + 8);
            drawLineWithArrows(x - 30, y, x, y, arrowSize, arrowSize, false, true);
            x += gappixel;
            drawLine(x, y - 8, x, y + 8);
            drawLineWithArrows(x, y, x + 30, y, arrowSize, arrowSize, true, false);
            x -= gappixel / 2;
            y = y + 20;
            if(ze == 0)
			{
				if (i == 1)
					outString(x, y, formatInchValue(cr), 1, 1);
				else
					outString(x, y, formatValue(cr), 1 , 1);
            }
			else if(ze > 0)
			{
                outString(x, y, formatValue(mr) + ' - ' + formatValue(ze) + " = " + formatValue(cr), 1, 1);
            }
			else
			{
                outString(x, y, formatValue(mr) + ' + ' + formatValue(-ze) + " = " + formatValue(cr), 1, 1);
            }
        }
    }

    function getBaseImage()
    {
        if (stgScale == "10ml")
            return imgBase10;
        if (stgScale == "25ml")
            return imgBase25;
        if (stgScale == "50ml")
            return imgBase50;
        if (stgScale == "100ml")
            return imgBase100;
        return imgBase10;
    }

    function getMainScaleDivisions()
    {
        if (stgScale == "10ml")
            return 50;
        if (stgScale == "25ml")
            return 50;
        if (stgScale == "50ml")
            return 50;
        if (stgScale == "100ml")
            return 100;
    }

    function getTickLengthLevel(i)
    {
        if (stgScale == "10ml")
        {
            if (i < 1)
                return -1;
            if (i % 5 == 0)
                return 0;
            return 2;
        }
        if (stgScale == "25ml")
        {
            if (i < 1)
                return -1;
            if (i % 10 == 0)
                return 0;
            if (i % 2 == 0)
                return 1;
            return 2;
        }
        if (stgScale == "50ml")
        {
            if (i < 1)
                return -1;
            if (i % 10 == 0)
                return 0;
            if (i % 5 == 0)
                return 1;
            return 2;
        }
        if (stgScale == "100ml")
        {
            if (i < 1)
                return -1;
            if (i % 10 == 0)
                return 0;
            if (i % 5 == 0)
                return 1;
            return 2;
        }
    }

    function getMsdPixels()
    {
        var mainScaleLengthPixels = 360;
        if (stgScale == "100ml")
        	mainScaleLengthPixels = 390;
        var msd_pixels = mainScaleLengthPixels / getMainScaleDivisions();
        return msd_pixels;
    }

    function getMsdValue()
    {
        if (stgScale == "10ml")
            return 0.2;
        if (stgScale == "25ml")
            return 0.5;
        if (stgScale == "50ml")
            return 1;
        if (stgScale == "100ml")
            return 1;
    }

    function getCylinderWidth()
    {
        if (stgScale == "10ml")
            return 66;
        if (stgScale == "25ml")
            return 66;
        if (stgScale == "50ml")
            return 66;
        if (stgScale == "100ml")
            return 66;
    }

    function getCylinderHeight()
    {
        if (stgScale == "10ml")
            return 280;
        if (stgScale == "25ml")
            return 280;
        if (stgScale == "50ml")
            return 280;
        if (stgScale == "100ml")
            return 280;
    }

    function getLabelGap()
    {
        if (stgScale == "10ml")
            return 5;
        if (stgScale == "25ml")
            return 10;
        if (stgScale == "50ml")
            return 10;
        if (stgScale == "100ml")
            return 10;
    }

    function getZeroError()
	{
    	return (zeroError / vernierScaleDivisions) * getMsdValue();
    }

	function formatInchValue(s)
	{
		s = s / 2.54;
        return s.toFixed(precision) + "inch";
    }
	
    function formatValue(s)
	{
		//s = Math.round(s * 1000) / 1000;
		s = parseInt(s * 10, 10) / 10;
		
        return s.toFixed(1); // + unit;
    }
	
    function getMainScaleReading()
	{
		if (stgScale == "Centimeter")
			return Math.floor((msr * vernierScaleDivisions + vsr + zeroError) / vernierScaleDivisions);
		else
			return Math.floor((msr * vernierScaleDivisions + vsr + zeroError) / vernierScaleDivisionsForInch);
    }
	
    function getVernierScaleReading()
	{
		if (stgScale == "Centimeter")
			return mod(vsr + zeroError, vernierScaleDivisions);
		else;
			return mod(vsr + zeroError, vernierScaleDivisionsForInch);
    }
	
    function getMeasuredReading()
	{
        return getCorrectedReading() + getZeroError();
    }
	
    function getCorrectedReading()
	{
        return (parseInt(msr, 10) + getMinScale()) * getMsdValue();
    }
    
    function getMsrReading(cr_val)
	{
        // var ret = (parseInt(msr, 10) + getMinScale()) * getMsdValue();
        var ret = parseInt(cr_val / getMsdValue() - getMinScale(), 10);
        return ret;
    }

    function getMinScale()
    {
        /*if (stgScale == "10ml")
            return 1;
        if (stgScale == "25ml")
            return 1;
        if (stgScale == "50ml")
            return 1;
        if (stgScale == "100ml")
            return 1; */
		return 0;
		//sssreturn 0.5;
    }
	
    /**
     * returns +ve remainder whn a is divided by n
     * */
    function mod(a,n)
	{
        return ((a % n ) + n ) % n;
    }
	
    function drawLine(x1, y1, x2, y2)
	{
        ctx.beginPath();
        ctx.moveTo(x1, y1);
        ctx.lineTo(x2, y2);
        ctx.stroke();
    }

    // x0,y0: the line's starting point
    // x1,y1: the line's ending point
    // width: the distance the arrowhead perpendicularly extends away from the line
    // height: the distance the arrowhead extends backward from the endpoint
    // arrowStart: true/false directing to draw arrowhead at the line's starting point
    // arrowEnd: true/false directing to draw arrowhead at the line's ending point
    function drawLineWithArrows(x0, y0, x1, y1, aWidth, aLength, arrowStart, arrowEnd)
	{
        var dx = x1 - x0;
        var dy = y1 - y0;
        var angle = Math.atan2(dy, dx);
        var length = Math.sqrt(dx * dx + dy * dy);

		ctx.save();
        ctx.translate(x0, y0);
        ctx.rotate(angle);
        ctx.beginPath();
        ctx.moveTo(0, 0);
        ctx.lineTo(length, 0);
        if(arrowStart)
		{
            ctx.moveTo(aLength, -aWidth);
            ctx.lineTo(0, 0);
            ctx.lineTo(aLength, aWidth);
        }
        if(arrowEnd)
		{
            ctx.moveTo(length - aLength, -aWidth);
            ctx.lineTo(length, 0);
            ctx.lineTo(length - aLength, aWidth);
        }
        
        ctx.stroke();
        ctx.restore();
    }
	
    function outString( x, y, s, x_align, y_align) 
	{
        var fm = ctx.measureText(s);
        var h = 10;//fm.height not supported in browsers
        
		switch (y_align) 
		{
            case 0:
                y += h;
                break;
            case 1:
                y += h / 2;
                break;
            case 2:
                break;
        }
		
        switch (x_align) 
		{
            case 0:
                ctx.fillText(s, x + 3, y);
                break;
            case 1:
                ctx.fillText(s, x - fm.width / 2, y);
                break;
            case 2:
                ctx.fillText(s, x - fm.width / 2, y);
                break;
        }
    }

    function outString1(ctx, x, y, s, x_align, y_align) {
        var fm = ctx.measureText(s);
        var h = 10;//fm.height not supported in browsers

        switch (y_align) {
            case 0:
                y += h;
                break;
            case 1:
                y += h / 2;
                break;
            case 2:
                break;
        }

        switch (x_align) {
            case 0:
                ctx.fillText(s, x + 3, y);
                break;
            case 1:
                ctx.fillText(s, x - fm.width / 2, y);
                break;
            case 2:
                ctx.fillText(s, x - fm.width / 2, y);
                break;
        }
    }
    
    function getMousePosWindow(event) {
        return [event.clientX, event.clientY];
    }

    function getTouchPosWindow(event) {
        return [event.touches[0].pageX, event.touches[0].pageY];
    }
    
    function getMousePos(event)
	{
		return [ event.clientX ,event.clientY ];
    }
	function getMousePos1(canvas, evt) {
        // from https://www.html5canvastutorials.com/advanced/html5-canvas-mouse-coordinates/
        var rect = canvas.getBoundingClientRect();
        return {
            x: evt.clientX - rect.left,
            y: evt.clientY - rect.top
        };
      }
	function getTouchPos(event)
	{
		return [event.touches[0].pageX, event.touches[0].pageY];
	}

    function mousePressed( me) 
	{
	    if (stgMode == "Type") return;
        /*var m;

		if (me.type == 'touchstart')
			m = getTouchPos(me);
		else
			m = getMousePos(me);
		
		var doc = document.documentElement;
		var left = (window.pageXOffset || doc.scrollLeft) - (doc.clientLeft || 0);
		var top = (window.pageYOffset || doc.scrollTop)  - (doc.clientTop || 0);

		var x, y;
		
		if (me.type != 'touchstart')
		{
			x = (m[0] - canvas.offsetLeft + left) / scale; // - canvas.offsetLeft ;
			y = (m[1] - canvas.offsetTop + top) / scale; // - canvas.offsetTop + top ;
		}
		else
		{
			x = (m[0] - canvas.offsetLeft) / scale; // - canvas.offsetLeft ;
			y = (m[1] - canvas.offsetTop) / scale; // - canvas.offsetTop + top ;
		}		

        var offsetOriginY = 5 * getMsdPixels();
        var xBoundLeft = xOffset + scaleOriginX;
        var xBoundRight = xBoundLeft + getCylinderWidth();
        var yBoundBottom = yOffset + scaleOriginY - getCylinderHeight();
        var yBoundTop = yOffset + scaleOriginY + offsetOriginY;
        
		console.log("-----------------------------");
		console.log("x : " +x);
        console.log("y : " +y);
        console.log("x bound left : " +xBoundLeft);
        console.log("x bound right : " +xBoundRight);
        console.log("y bound bottom : " +yBoundBottom);
        console.log("y bound top : " +yBoundTop); 
        
		if (y > yBoundBottom && y < yBoundTop &&
            x > xBoundLeft - 15 && x < xBoundRight)
        {
            dragMode = 2;
        }
        else
        {
            dragMode = 0;
        }
		
        paint();
        prev_mx = m[0];
        prev_my = m[1];
        */
		
		//console.log("-----MousePressed-----");
		
		var m;
		if(me.type == 'touchstart')
			m = getTouchPos(me);
		else 
			m = getMousePos(me);

		var doc = document.documentElement;
		var left = (window.pageXOffset || doc.scrollLeft) - (doc.clientLeft || 0);
		var top = (window.pageYOffset || doc.scrollTop)  - (doc.clientTop || 0);

		var x, y;
		var isMobile = 0;
		if (me.type != 'touchstart')
		{
			x = (m[0] - canvas.offsetLeft - canvasArea.offsetLeft + left) / scale; // - canvas.offsetLeft ;
			y = (m[1] - canvas.offsetTop - canvasArea.offsetTop + top) / scale; // - canvas.offsetTop + top ;
			/*x = m[0] / scale;
			y = m[1] / scale;*/
		}
		else
		{
			x = (m[0] - canvas.offsetLeft - canvasArea.offsetLeft) / scale; // - canvas.offsetLeft ;
			y = (m[1] - canvas.offsetTop - canvasArea.offsetTop) / scale; // - canvas.offsetTop + top ; */
			/*x = m[0] / scale;
			y = m[1] / scale;*/
			
			isMobile = 1;
		}		

        var offsetOriginY = 5 * getMsdPixels();
        var xBoundLeft = xOffset + scaleOriginX;
        var xBoundRight = xBoundLeft + getCylinderWidth();
        var yBoundBottom = yOffset /*+ scaleOriginY - getCylinderHeight()*/;
        var yBoundTop = yOffset + scaleOriginY /*+ offsetOriginY*/;
        
			
		if (y > yBoundBottom && y < yBoundTop &&
            x > xBoundLeft && x < xBoundRight)
		{
			//if (stgMode == "Game" && gameStarted == 1)
			{
				msrSelected = 1; // = (yBoundTop - y) / getMsdPixels();
			}
			//else
			//	msrSelected = 0;
		}
		
		/*console.log("-----------------------------");
		console.log("x : " +x);
        console.log("y : " +y);
        console.log("x bound left : " +xBoundLeft);
        console.log("x bound right : " +xBoundRight);
        console.log("y bound bottom : " +yBoundBottom);
        console.log("y bound top : " +yBoundTop);*/
		
		if (isMobile)
		{
			if (y > yBoundBottom && y < yBoundTop &&
					x > xBoundLeft && x < xBoundRight)
			{
				msr = (yBoundTop - y) / getMsdPixels();
			
				if(msr + getMinScale() >= getMainScaleDivisions())
				{
					msr = getMainScaleDivisions() - getMinScale();
				}
				
				if (msr < 0)
				msr = 0;
				
				update();
			}
					
			
			
			//me.preventDefault();
		}
		
		//me.preventDefault();
    }

    function mouseReleased(me) 
	{
        dragMode=0;
    }

    function mouseWheelMoved(me) 
	{
	    if (stgMode == "Type") return;
        var scroll = me.wheelDelta > 0 ? 1 : -1;
        translateVernier(scroll);
        
		me.preventDefault();
    }

    function mouseDragged( me) 
	{
	    if (stgMode == "Type") return;
	
		if (msrSelected == 1)
			return;
			
		if(me.target.id != 'myCanvas') return;
		var m;
		if(me.type == 'touchmove')
			m = getTouchPos(me);
		else 
			m = getMousePos(me);

		var doc = document.documentElement;
		var left = (window.pageXOffset || doc.scrollLeft) - (doc.clientLeft || 0);
		var top = (window.pageYOffset || doc.scrollTop)  - (doc.clientTop || 0);

		var x, y;
		
		if (me.type != 'touchstart')
		{
			x = (m[0] - canvas.offsetLeft - canvasArea.offsetLeft + left) / scale; // - canvas.offsetLeft ;
			y = (m[1] - canvas.offsetTop - canvasArea.offsetTop + top) / scale; // - canvas.offsetTop + top ;*/
			/*x = (m[0] - canvas.offsetLeft) / scale;
			y = (m[1] - canvas.offsetTop) / scale;*/
		}
		else
		{
			x = (m[0] - canvas.offsetLeft - canvasArea.offsetLeft) / scale; // - canvas.offsetLeft ;
			y = (m[1] - canvas.offsetTop - canvasArea.offsetTop) / scale; // - canvas.offsetTop + top ; */
			/*x = m[0] / scale;
			y = m[1] / scale;*/
		}		

        var offsetOriginY = 5 * getMsdPixels();
        var xBoundLeft = xOffset + scaleOriginX;
        var xBoundRight = xBoundLeft + getCylinderWidth();
        var yBoundBottom = yOffset /*+ scaleOriginY - getCylinderHeight()*/;
        var yBoundTop = yOffset + scaleOriginY /*+ offsetOriginY*/;
        
			
		if (y > yBoundBottom && y < yBoundTop &&
            x > xBoundLeft && x < xBoundRight)
		{
			msr = (yBoundTop - y) / getMsdPixels();
		}
		else
		{
			//if (!(stgMode == "Game" && gameStarted == 1))
			//	msr = 0;
			if (msrSelected == 0)
				msr = 0;
		}
		
		if(msr + getMinScale() >= getMainScaleDivisions())
		{
			msr = getMainScaleDivisions() - getMinScale();
			//console.log("msr=" + msr);
		}
		
		if (msr < 0)
			msr = 0;
		
/*		console.log("-----------------------------");
		console.log("x : " +x);
        console.log("y : " +y);
        console.log("x bound left : " +xBoundLeft);
        console.log("x bound right : " +xBoundRight);
        console.log("y bound bottom : " +yBoundBottom);
        console.log("y bound top : " +yBoundTop); */
		paint();
		
    }


    function onKeyEvent(e)
	{
	    const target = e.target;
	    if (target.tagName === 'INPUT' || target.tagName === 'TEXTAREA') {
	        return
	    }
        if(e.keyCode==37 ||e.keyCode==38)
		{
            translateVernier(-10);
        }
        else if (e.keyCode==39||e.keyCode==40)
		{
            translateVernier(10);
        }
        else if (e.keyCode==33) //page up
		{
            scale *= 1.05;
            update();
        }
        else if (e.keyCode==34) //page down
		{
            scale *= 0.96;
            update();
        }
        else if (e.keyCode >= 96/*'0'*/ && e.keyCode <= 105/*'9'*/)  // when using numpad...
        {
            {
                set_input_answer("" + (e.keyCode - 96));
                drawType()
            }
        } else if (e.keyCode >= 48/*'0'*/ && e.keyCode <= 57/*'9'*/) {
            {
                set_input_answer("" + (e.keyCode - 48));
                drawType()
            }
        } else if (e.keyCode == 8/*BackSpace*/) {
            set_input_answer("Back");
            drawType()
        }
		else 
		{
            return false;
        }

        e.preventDefault();
    }
    
    function getMouseClick(me) {
        if (stgMode == "Type") {
            var m;

            if (me.type == 'touchstart')
                m = getTouchPosWindow(me);
            else
                m = getMousePosWindow(me);
            
            // var doc = document.documentElement;
            // var left = (window.pageXOffset || doc.scrollLeft) - (doc.clientLeft || 0);
            // var top = (window.pageYOffset || doc.scrollTop) - (doc.clientTop || 0);
    

            var x, y;
            // if (me.type != 'touchstart') {
            //     //x = (m[0] - canvas.offsetLeft + left) / scale - xOffset; // - canvas.offsetLeft ;
            //     //y = (m[1] - canvas.offsetTop + top) / scale - yOffset; // - canvas.offsetTop + top ;
            //     x = (m[0] - canvas.offsetLeft + left) / scale - xOffset; // - canvas.offsetLeft ;
            //     y = (m[1] - canvas.offsetTop + top) / scale - yOffset; // - canvas.offsetTop + top ;
            // }
            // else {
            //     //x = (m[0] - canvas.offsetLeft) / scale - xOffset; // - canvas.offsetLeft ;
            //     //y = (m[1] - canvas.offsetTop) / scale - yOffset; // - canvas.offsetTop + top ;
            //     x = (m[0] - canvas.offsetLeft) / scale - xOffset; // - canvas.offsetLeft ;
            //     y = (m[1] - canvas.offsetTop) / scale - yOffset; // - canvas.offsetTop + top ;
            // }

            var canvas = document.getElementById('typeCanvas');

            var mousePosTmp = getMousePos1(canvas, me);
            x = mousePosTmp.x
            y = mousePosTmp.y;
            console.log("x", x)
            console.log("y", y)
            if (y > (60) && y < (90)) {
                if (x > (45 + 40 * 5) && x < (85 + 40 * 5)) {
                    set_input_answer("Back");
                } else {
                    for (let i = 0; i <= 4; i++) {
                        if (x > (45 + 40 * i) && x < (85 + 40 * i)) {
                            set_input_answer("" + (i+1));
                            break;
                        }
                    }
                }
            }
            
            if (y > (110) && y < (140)) {
                for (let i = 0; i <= 4; i++) {
                    if (x > (45 + 40 * i) && x < (85 + 40 * i)) {
                        set_input_answer("" + (i+5+1)%10);
                        break;
                    }
                }
            }
            drawType()
            return;
        } 
        //console.log("Clicked on " + mousePos.x + ","+ mousePos.y);
        if (pause || gameover)
            return

        //var canvasX = mousePos.x;
        var rulerX = mousePos.x - offsetLeft;
        drawSections = stgRulerLength * stgRulerPrecision;
        var sectionWidth = (250 * stgRulerLength) / drawSections;
        var nearestSection = Math.round(rulerX / sectionWidth);
        checkGuess(nearestSection);

    }
</script>

<script>
    function toggleNavMenu() {
        var x = document.getElementById("NavMenu");
        if (x.className.indexOf("w3-show") == -1) {  
            x.className += " w3-show";
        } else { 
            x.className = x.className.replace(" w3-show", "");
        }
    }

    function toggleCategory(categoryId) {
        var category = document.getElementById(categoryId);
        if (category.className.indexOf("w3-show") == -1) {  
            category.className += " w3-show";
        } else { 
            category.className = category.className.replace(" w3-show", " w3-hide");
        }
    }
</script>

<script type="text/javascript" async="" src="https://btloader.com/tag?o=5698917485248512&upapi=true&domain=rulergame.net"></script>

<script>!function(){"use strict";var e;e=document,function(){var t,n;function r(){var t=e.createElement("script");t.src="https://cafemedia-com.videoplayerhub.com/galleryplayer.js",e.head.appendChild(t)}function a(){var t=e.cookie.match("(^|[^;]+)\s*__adblocker\s*=\s*([^;]+)");return t&&t.pop()}function c(){clearInterval(n)}return{init:function(){var e;"true"===(t=a())?r():(e=0,n=setInterval((function(){100!==e&&"false" !== t || c(), "true" === t && (r(), c()), t = a(), e++}), 50))}}}().init()}();
</script>
</body>
</html>