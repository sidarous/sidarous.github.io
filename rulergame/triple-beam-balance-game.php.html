<!doctype html>
<html>
<head>
    
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta charset="UTF-8">
    <title>The Triple Beam Balance Game - Learn and Practice Reading a Triple Beam Balance</title>
	
<meta name="description" content="With our intuitive triple beam balance game, you will quickly learn how to read a triple beam balance.">
<meta property="og:title" content="The Triple Beam Balance Game - Learn and Practice Reading a Triple Beam Balance">
<meta property="og:description" content="With our intuitive triple beam balance game, you will quickly learn how to read a triple beam balance.">
<meta property="og:image" content="https://www.rulergame.net/triple-beam-balance.php">
<meta property="og:url" content="https://www.rulergame.net/images/og-triple-beam-balance.png">
<meta property="og:type" content="website">
<link rel="canonical" href="triple-beam-balance-game.php.html">

	
    <link rel="stylesheet" href="assets/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/css/site.css">
    <link rel="stylesheet" href="assets/css/animate.min.css">
    <link rel="stylesheet" href="triple-beam-balance/css/triple-beam-balance.css">
    <!-- <link rel="stylesheet" href="css/w3.css"> -->
    
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async="" src="gtag/js?id=G-XE0GQQH6FP"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-XE0GQQH6FP');
</script>
<!-- AdThrive Head Tag Manual -->
<script data-no-optimize="1" data-cfasync="false">
(function(w, d) {
	w.adthrive = w.adthrive || {};
	w.adthrive.cmd = w.
	adthrive.cmd || [];
	w.adthrive.plugin = 'adthrive-ads-manual';
	w.adthrive.host = 'ads.adthrive.com';var s = d.createElement('script');
	s.async = true;
	s.referrerpolicy='no-referrer-when-downgrade';
	s.src = 'https://' + w.adthrive.host + '/sites/6441cbd48ef14750ba9ecca1/ads.min.js?referrer=' + w.encodeURIComponent(w.location.href) + '&cb=' + (Math.floor(Math.random() * 100) + 1);
	var n = d.getElementsByTagName('script')[0];
	n.parentNode.insertBefore(s, n);
})(window, document);
</script>
<!-- End of AdThrive Head Tag -->

</head>
<body>
<!-- Navbar -->
<div class="z100">
    <div class="w3-bar w3-pale-green w3-card w3-left-align w3-large">
        <a class="w3-bar-item w3-button w3-padding-large rulergame-dark-green" href="javascript:void(0);" onclick="toggleNavMenu()" title="Toggle Navigation Menu">Menu</a>
        <div id="topBanner"><a href="index.htm"><img src="images/rulergame.gif" id="topBannerImage" alt="The Ruler Game - Learn to read a ruler"></a></div>
    </div>
    <div id="NavMenu" class="w3-dropdown-content w3-bar-block w3-border w3-large rulergame-dark-green z100">
	<a href="index.htm" class="w3-bar-item w3-button w3-padding-large">Home</a>
        <a href="javascript:void(0);" class="w3-bar-item w3-button w3-padding-large" onclick="toggleCategory('measuringGames')">Measuring Games</a>
        <div id="measuringGames" class="w3-hide w3-bar-block rulergame-submenu">
            <a href="new-english-ruler-game.php.html" class="w3-bar-item w3-button w3-padding-large">Inch Ruler Game</a>
            <a href="new-metric-ruler-game.php.html" class="w3-bar-item w3-button w3-padding-large">Metric Ruler Game</a>
            <a href="micrometer-game.php.html" class="w3-bar-item w3-button w3-padding-large">Micrometer Game</a>
            <a href="metric-micrometer-game.php.html" class="w3-bar-item w3-button w3-padding-large">Metric Micrometer Game</a>
			<a href="dial-caliper-game.php.html" class="w3-bar-item w3-button w3-padding-large">Dial Caliper Game</a>
			<a href="vernier-caliper-game.php.html" class="w3-bar-item w3-button w3-padding-large">Vernier Caliper Game</a>
			<a href="graduated-cylinder-game.php.html" class="w3-bar-item w3-button w3-padding-large">Graduated Cylinder Game</a>
			<a href="architectural-scale-game.php.html" class="w3-bar-item w3-button w3-padding-large">Architectural Scale Game</a>
			<a href="machinist-ruler-game.php.html" class="w3-bar-item w3-button w3-padding-large">Machinist Ruler Game</a>
			<a href="triple-beam-balance-game.php.html" class="w3-bar-item w3-button w3-padding-large">Triple Beam Balance Game</a>
        </div>
        <a href="javascript:void(0);" class="w3-bar-item w3-button w3-padding-large" onclick="toggleCategory('timeGames')">Time and Temperature Games</a>
        <div id="timeGames" class="w3-hide w3-bar-block rulergame-submenu">
            <a href="clock-game.php.html" class="w3-bar-item w3-button w3-padding-large">Clock Game</a>
            <a href="military-time-game.php.html" class="w3-bar-item w3-button w3-padding-large">Military Time Game</a>
			<a href="thermometer-game.php.html" class="w3-bar-item w3-button w3-padding-large">Thermometer Reading Game</a>
            <a href="temperature-conversion-game.php.html" class="w3-bar-item w3-button w3-padding-large">Temperature Conversion Game</a>
        </div>
        <a href="javascript:void(0);" class="w3-bar-item w3-button w3-padding-large" onclick="toggleCategory('moneyGames')">Money & Life Games</a>
        <div id="moneyGames" class="w3-hide w3-bar-block rulergame-submenu">
            <a href="money-game.php.html" class="w3-bar-item w3-button w3-padding-large">Money Counting Game</a>
            <a href="shopping-money-counting-game.php.html" class="w3-bar-item w3-button w3-padding-large">Shopping Money Counting Game</a>
            <a href="counting-back-change-game.php.html" class="w3-bar-item w3-button w3-padding-large">Counting Back Change Game</a>
			<a href="blood-pressure-game.php.html" class="w3-bar-item w3-button w3-padding-large">Blood Pressure Game</a>
			<a href="stadiometer-game.php.html" class="w3-bar-item w3-button w3-padding-large">Stadiometer Game</a>
			<a href="physician-scale-game.php.html" class="w3-bar-item w3-button w3-padding-large">Physician Scale Game</a>
			<a href="cooking-conversions-game.php.html" class="w3-bar-item w3-button w3-padding-large">Cooking Conversions Game</a>
        </div>
    </div>
</div>


<div id="mainBodyContent" class="w3-container w3-margin-top">

    <div class="container-fluid setting-section">
      
      
        <div class="vertical-center">
            <!-- <button class="btn btn-game-start" id= "btnStart">
            Play Game
            </button> -->
            <div id="buttonBar">
            <input type="button" id="btnStart" value="Play Game">
            <input type="button" id="btnSettings" value="Settings">
            </div>
        </div>
      
        
        <div id="questionBar">
            <div id="txtQuestion"><span>&nbsp;</span></div>
        </div>
  
        <div id="preferencesBox" class="w3-card w3-pale-yellow w3-border w3-border-yellow">
            <span onclick="$('#preferencesBox').slideToggle();" class="w3-button w3-display-topright">X</span>
            <header class="w3-container w3-yellow">
            <h5>Settings</h5>
            </header>
            <div class="w3-padding-small">
            <div id="timerBox" class="w3-row">
                <div class="w3-col s6 w3-right-align rulergame-align-vert"><strong>Timer:&nbsp;</strong></div>
                <div class="w3-col s6">
                    <select id="stgTimer" class="w3-select w3-border">
                        <option value="On" selected="">On</option>
                        <option value="Off">Off</option>
                    </select>  
                </div>
            </div>
            <div id="soundsBox" class="w3-row">
                <div class="w3-col s6 w3-right-align rulergame-align-vert"><strong>Sounds:&nbsp;</strong></div>
                <div class="w3-col s6">
                    <select id="stgSounds" class="w3-select w3-border">
                        <option value="On" selected="">On</option>
                        <option value="Off">Off</option>
                    </select>  
                </div>
            </div>         
            
            </div>
            <!-- <div id="rulerLengthMessage" class="w3-row"></div> -->
        </div>
        
  
    </div>
    
</div>
    
  
<div class="canvas-area">

    <div id="canvasArea">
        <canvas id="playerCanvas"></canvas>
        <!-- <canvas id="rulerCanvas" width="900" height="500" style="border:2px solid #000000; background-color:#fff"></canvas> -->
        <canvas id="myCanvas" width="1000" height="500" style="border:2px solid #000000; background-color:#fff"></canvas>
        <!-- <canvas id="myCanvas" style="border: 1px solid #c3c3c3;">
            Your browser does not support the HTML5 canvas tag.
        </canvas> -->
      
        <div id="strikeBoard"><span></span></div>
        <div id="cheerBoard"><div class='cheer animated rubberBand'>123</div></div>

        <div id="detailedControl" class="w3-container w3-padding">
            <div class="w3-row">
                

                      <div id="topbeam" class="w3-third">  
                        <div class="w3-row number-input"> 
                            <div id="labelmediumsmall"><b>Top Beam</b></div>
                            <div>
                            <button class="spinner decrement" id="btnmediumdecrement">-</button>
                                <input id="mediumsmallControl" name="sleevemain" value="00000" onchange="DrawSleeveMainChange()">
                            <button class="spinner increment" id="btnmediumincrement">+</button> 
                            </div>
                        </div>
						</div>
						
					<div id="middlebeam" class="w3-third">	
						<div class="w3-row number-input"> 
                            <div id="labelheavysmall"><b>Middle Beam</b></div>
                            <div>
                            <button class="spinner decrement" id="btnheavydecrement">-</button>
                                <input id="heavysmallControl" name="sleevemain" value="00000" onchange="DrawSleeveMainChange()">
                            <button class="spinner increment" id="btnheavyincrement">+</button> 
                            </div>
                        </div>
						</div>
						
					<div id="bottombeam" class="w3-third">	
                        <div class="w3-row number-input"> 
                            <div id="labellightsmall"><b>Bottom Beam</b></div>
                            <div>
                            <button class="spinner decrement" id="btnlightdecrement">-</button>
                                <input id="lightsmallControl" name="sleevemain" value="00000" onchange="DrawSleeveMainChange()">
                            <button class="spinner increment" id="btnlightincrement">+</button> 
                            </div>
                        </div>
						</div>
						
						
						
                    </div>
                </div>
            </div>
        </div> 


<div id="resultsBar" class="w3-container">
    <div class="w3-row">
        <div id="submitColumn" class="w3-third w3-center"> 
            <input type="button" id="btnSubmit" value="Submit Answer">
			<br>
        </div>
        <div id="displayBoard" class="w3-twothird w3-center">
            <div id="scoreColumn"><div id="txtScore"></div><div class="resultsBarLabel">SCORE</div></div>
            <div id="timerColumn"><canvas id="timerCanvas"></canvas><div class="resultsBarLabel">TIME</div></div>
            <div id="levelColumn"><canvas id="levelCanvas"></canvas><div class="resultsBarLabel">LEVEL</div></div>
            <div id="strikesColumn"><div id="txtStrikes"></div><div class="resultsBarLabel">STRIKES</div></div>                
        </div>
    </div>
    
</div>

<div id="instructionsBox" class="w3-container">
    <h1 align="center">The Triple Beam Balance Game - Learn and Practice Reading a Triple Beam Balance</h1>
	
	<h2>Instructions:</h2>
                    <ul class="w3-ul">
                        <li>This game makes practicing your triple beam balance scale reading skills fun and easy.</li>
                        <li>You can play this game using a mouse or a touchscreen.</li>
                        <li>Press the <em><strong>Play Game</strong></em> button to start the game.</li>
                        <li>An object will appear on the weighting plate of the triple beam balance.</li>
                        <li>With your mouse or finger, click/tap and hold each of the three weight poises and slide them along the beams to balance out the object.</li>
						<li>If you are not able to hit exactly the right spot by sliding, you can use the plus and minus icons below the triple beam balance to control the weight poises.</li>
                        <li>When the scale is balanced, the pointer will turn red.</li>
						<li>Now, click on the numbers below the triple beam balance or use your keyboard to enter the weight of the object.</li>
						<li>After you have entered the weight, click/tap the "Submit Answer" button.</li>
                        <li>For each correct answer, you will be awarded points. Your score is displayed on the left side of the Results Bar that appears below the triple beam balance.</li>
                        <li>Points are awarded based on the following table.
                              <table class="w3-table w3-bordered">
                                <tr><th>Level</th><th>Time Limit</th><th>Points</th></tr>
                                <tr><td>1</td><td>40 seconds</td><td>10</td></tr>
                                <tr><td>2</td><td>35 seconds</td><td>20</td></tr>
                                <tr><td>3</td><td>30 seconds</td><td>30</td></tr>
                                <tr><td>4</td><td>25 seconds</td><td>40</td></tr>
                                <tr><td>5</td><td>20 seconds</td><td>50</td></tr>
                                <tr><td>6</td><td>15 seconds</td><td>60</td></tr>
                                <tr><td>7</td><td>10 seconds</td><td>70</td></tr>
                                <tr><td>8</td><td>5 seconds</td><td>80</td></tr>
                              </table></li>
                        <li>Each time you correctly answer 5 measurements, you will advance to the next level. Your current level is indicated in the Results Bar below the triple beam balance.</li>
                        <li>The timer is represented to the right of the score in the Results Bar. As time passes, the bar will get shorter.</li>
                        <li>If you have not submitted a measurement when the time runs out, you will receive a strike.</li>
                        <li>For each incorrect answer, you will receive a strike. After three strikes, your game is over. The number of strikes you have received is indicated on the right side of the Results Bar.</li>
                        <li>Click the <em><strong>Settings</strong></em> button to adjust your preferences for the game.
                            <ul>
                                <li><strong>Timer:</strong> The default setting is On. Select Off to have unlimited time to submit your answer.</li>
                                <li><strong>Sounds:</strong> The default setting is On. Select Off to disable all game sounds.</li>
                                <li>All the settings will revert to default and your score will reset if you refresh your browser.</li>
                            </ul></li>
                    </ul>
</div>

<br>
  
<footer class="w3-container w3-padding rulergame-dark-green">  
            <div class="w3-row-padding">

              <div class="w3-third">
                <h3>MEASURING GAMES</h3>
                <ul class="w3-ul">
                  <li class="w3-padding-16">
                    <a href="new-english-ruler-game.php.html" class="w3-text-white w3-hover-opacity w3-large rulergame-no-underline">New Inch Ruler Game</a><br>
                  </li>
				  <li class="w3-padding-16">
                    <a href="new-metric-ruler-game.php.html" class="w3-text-white w3-hover-opacity w3-large rulergame-no-underline">New Metric Ruler Game</a><br>
                  </li>
                  <li class="w3-padding-16">
                    <a href="v2-standard-english-ruler-game.php.html" class="w3-text-white w3-hover-opacity w3-large rulergame-no-underline">Original Inch Ruler Game</a><br>
                  </li>
				  <li class="w3-padding-16">
                    <a href="micrometer-game.php.html" class="w3-text-white w3-hover-opacity w3-large rulergame-no-underline">Inch Mictometer Game</a><br>
                  </li>
				  <li class="w3-padding-16">
                    <a href="metric-micrometer-game.php.html" class="w3-text-white w3-hover-opacity w3-large rulergame-no-underline">Metric Micrometer Game</a><br>
                  </li>
                  <li class="w3-padding-16">
                    <a href="v2-metric-ruler-game.php.html" class="w3-text-white w3-hover-opacity w3-large rulergame-no-underline">Original Metric Ruler Game</a><br>
                  </li>
				  <li class="w3-padding-16">
                    <a href="dial-caliper-game.php.html" class="w3-text-white w3-hover-opacity w3-large rulergame-no-underline">Dial Caliper Game</a><br>
                  </li>
				  <li class="w3-padding-16">
                    <a href="vernier-caliper-game.php.html" class="w3-text-white w3-hover-opacity w3-large rulergame-no-underline">Vernier Caliper Game</a><br>
                  </li>
                  <li class="w3-padding-16">
                    <a href="graduated-cylinder-game.php.html" class="w3-text-white w3-hover-opacity w3-large rulergame-no-underline">Graduated Cylinder Game</a><br>
                  </li>
				  <li class="w3-padding-16">
                    <a href="architectural-scale-game.php.html" class="w3-text-white w3-hover-opacity w3-large rulergame-no-underline">Architectural Scale Game</a><br>
                  </li>
				  <li class="w3-padding-16">
                    <a href="machinist-ruler-game.php.html" class="w3-text-white w3-hover-opacity w3-large rulergame-no-underline">Machinist Ruler Game</a><br>
                  </li>
				  <li class="w3-padding-16">
                    <a href="triple-beam-balance-game.php.html" class="w3-text-white w3-hover-opacity w3-large rulergame-no-underline">Triple Beam Balance Game</a><br>
                  </li>
                </ul>
              </div>

              <div class="w3-third">
                <h3>TIME AND TEMPERATURE GAMES</h3>
                <ul class="w3-ul">
                  <li class="w3-padding-16">
                    <a href="clock-game.php.html" class="w3-text-white w3-hover-opacity w3-large rulergame-no-underline">Clock Game</a><br>
                  </li>
				  <li class="w3-padding-16">
                    <a href="military-time-game.php.html" class="w3-text-white w3-hover-opacity w3-large rulergame-no-underline">Military Time Game</a><br>
                  </li>
				  <li class="w3-padding-16">
                    <a href="thermometer-game.php.html" class="w3-text-white w3-hover-opacity w3-large rulergame-no-underline">Thermometer Reading Game</a><br>
                  </li>
				  <li class="w3-padding-16">
                    <a href="temperature-conversion-game.php.html" class="w3-text-white w3-hover-opacity w3-large rulergame-no-underline">Temperature Conversion Game</a><br>
                  </li>
				</ul>
				<h3>MONEY AND LIFE GAMES</h3>
				<ul class="w3-ul">
				  <li class="w3-padding-16">
                    <a href="money-game.php.html" class="w3-text-white w3-hover-opacity w3-large rulergame-no-underline">Money Counting Game</a><br>
                  </li>
				  <li class="w3-padding-16">
                    <a href="shopping-money-counting-game.php.html" class="w3-text-white w3-hover-opacity w3-large rulergame-no-underline">Shopping Money Counting Game</a><br>
                  </li>
				  <li class="w3-padding-16">
                    <a href="counting-back-change-game.php.html" class="w3-text-white w3-hover-opacity w3-large rulergame-no-underline">Counting Back Change Game</a><br>
                  </li>
				  <li class="w3-padding-16">
                    <a href="blood-pressure-game.php.html" class="w3-text-white w3-hover-opacity w3-large rulergame-no-underline">Blood Pressure Game</a><br>
                  </li>
				  <li class="w3-padding-16">
                    <a href="stadiometer-game.php.html" class="w3-text-white w3-hover-opacity w3-large rulergame-no-underline">Stadiometer Game</a><br>
                  </li>
				  <li class="w3-padding-16">
                    <a href="physician-scale-game.php.html" class="w3-text-white w3-hover-opacity w3-large rulergame-no-underline">Physician Scale Game</a><br>
                  </li>
				  <li class="w3-padding-16">
                    <a href="cooking-conversions-game.php.html" class="w3-text-white w3-hover-opacity w3-large rulergame-no-underline">Cooking Conversions Game</a><br>
                  </li>
                </ul>
              </div>

              <div class="w3-third">
                <h3>CONTACT ME</h3>
                  <p class="w3-xxlarge w3-margin-top w3-margin-bottom">
                    <a href="privacy-policy.php.html#contact" class="w3-text-white w3-hover-opacity"><img src="contact-button.png" alt="Contact button"></a>
                    <a href="https://www.facebook.com/RulerGame/" class="w3-text-white w3-hover-opacity" target="_blank"><img src="facebook-button.png" alt="Facebook button"></a>
                  </p>                   
                  <p>Spears Technologies, Inc.<br>
                    Attn: The Ruler Game<br>
                    576 N. Birdneck Rd. #178<br>
                    Virginia Beach, VA 23451</p>
              </div>

            </div>
<div class="rulergame-dark-green w3-center w3-padding w3-border-top">Copyright &copy; 2025  by RulerGame.net and Ricky D. Spears. All Rights Reserved. <a href="privacy-policy.php.html" class="w3-text-white w3-hover-opacity">Privacy Policy</a><br><br><br></div>
</footer>

<script src="assets/js/jquery.min.js">  </script>
<script src="assets/js/jquery-3.6.0.min.js">  </script>
<script src="assets/js/bootstrap.min.js">  </script>
<script src="triple-beam-balance/js/triple_beam.js">  </script>
<script type='text/javascript'>
    /*drawing offset*/
    var scale;
    var xOffset;
    var yOffset;
    var dragMode = 0; //0 == none, 1 = world, 2 = vernier, 3 = object

    var prev_mx, prev_my; //prev mouse positions
    // var bgColor = "rgb(0,64,84)";
    var bgColor = "rgb(255,255,255)";
    var fgColor = "orange";//rgb(255,255,255)";
    const scaleColor = "black";

    var loadedItems = 0;
    const itemsToLoad = 5;
    
    var imgBkGnd = new Image();
    imgBkGnd.src = "https://www.rulergame.net/triple-beam-balance/images/bkground.png"
    imgBkGnd.onload = itemloaded;
	var imgBkGndMagnify = new Image();
    imgBkGndMagnify.src = "https://www.rulergame.net/triple-beam-balance/images/bkground-magnify.png"
    imgBkGndMagnify.onload = itemloaded;
	var imgRulerBase = new Image();
    imgRulerBase.src = "https://www.rulergame.net/triple-beam-balance/images/ruler-base.png"
    imgRulerBase.onload = itemloaded;
	var imgRulerPane = new Image();
    imgRulerPane.src = "https://www.rulergame.net/triple-beam-balance/images/ruler-pane.png"
    imgRulerPane.onload = itemloaded;
    var imgTailNormal = new Image();
    imgTailNormal.src = "https://www.rulergame.net/triple-beam-balance/images/tail-normal.png"
    imgTailNormal.onload = itemloaded;
	var imgTailRight = new Image();
    imgTailRight.src = "https://www.rulergame.net/triple-beam-balance/images/tail-right.png"
    imgTailRight.onload = itemloaded;
	var imgTailMagnify = new Image();
    imgTailMagnify.src = "https://www.rulergame.net/triple-beam-balance/images/tail-magnify.png"
    imgTailMagnify.onload = itemloaded;
	var imgTailMagnifyRight = new Image();
    imgTailMagnifyRight.src = "https://www.rulergame.net/triple-beam-balance/images/tail-magnify-right.png"
    imgTailMagnifyRight.onload = itemloaded;
	var imgHandMedium = new Image();
    imgHandMedium.src = "https://www.rulergame.net/triple-beam-balance/images/medium-hand.png"
    imgHandMedium.onload = itemloaded;
	var imgHandHeavy = new Image();
    imgHandHeavy.src = "https://www.rulergame.net/triple-beam-balance/images/heavy-hand.png"
    imgHandHeavy.onload = itemloaded;
	var imgHandLight = new Image();
    imgHandLight.src = "https://www.rulergame.net/triple-beam-balance/images/light-hand.png"
    imgHandLight.onload = itemloaded;
	var imgStone = new Image();
    imgStone.src = "https://www.rulergame.net/triple-beam-balance/images/stone.png"
    imgStone.onload = itemloaded;
    
	var cr; 

    const scaleOriginX = 67; //jaw Left position
    const scaleOriginY0 = 105; //105; //scale top position
    const scaleOriginY = 205; //162; //scale bottom position
    const offsetOriginX = 12; //distance of scale origin level from scaleOriginX
    const vernierOriginX = 55; //distance of vernier origin in pixel in vernier.png
    const vernierOriginY = 204; //161;

    const rulerWidthPixel = 915;
    const vernierMajorTickLengthPixels = 10;
    const vernierMinorTickLengthPixels = 6;
    
    const vernierScaleHeightPixels = 397; //354;
    const bladeWidthPixel = 716;
    const bladeHeightPixel = 20;
    const rulerMidPointY = 188;

    const unit = "cm";
    
	const mainScaleLengthPixels = 500; // not neccessary
	const mainScaleDivisions = 10; // not neccessary
    const heavyScaleLengthPixels = 585;
    const mediumScaleLengthPixels = 652;
    const lightScaleLengthPixels = 672;
	const heavyScaleDivisions = 5;
	const mediumScaleDivisions = 10;
	const lightScaleDivisions = 100;

    const heavyUnit = 100;
    const mediumUnit = 10;
    const lightUnit = 0.1;

    var msdValue = 0.1;
	var msdValueInch = 0.1; // * 2.54;
    var vernierScaleDivisions = 50;
	var vernierScaleDivisionsForInch = 25;
    var msd_pixels = mainScaleLengthPixels / mainScaleDivisions; // not neccessary
    var vsd_pixels = mainScaleLengthPixels / mainScaleDivisions; // not neccessary
	var medium_pixels = mediumScaleLengthPixels / mediumScaleDivisions;
	var heavy_pixels = heavyScaleLengthPixels / heavyScaleDivisions;
	var light_pixels = lightScaleLengthPixels / lightScaleDivisions;
	
    var vernierScaleLengthPixels = 50 + vsd_pixels * vernierScaleDivisions + 50 ;
	
    var precision = 3;
    var LC = 0;
    
    var msr = 0; // not neccessary
    var vsr = 0; // not neccessary
	
	var rotate_angle = 6 * Math.PI / 180;
    var isWeightRight = false;
    var input_answer = "0.0";
	var set_input_answer = function(val) {
		if (val == "Back") {
			input_answer = "" + (parseFloat(input_answer) / 10).toFixed(1);
		} else {
			input_answer = "" + ((parseFloat(input_answer) * 10 + parseInt(val) / 10)).toFixed(1);
		}
		
		if (parseFloat(input_answer) > 610) {
			tmp = parseInt(input_answer);
			tmp = tmp - tmp % 1000;
			input_answer = (parseFloat(input_answer) - tmp); //"610.0";
		} else if (parseFloat(input_answer) < 0.0) {
			input_answer = "0.0";
		}
	}
	var heavy_msr = 0;
    var medium_msr = 0;
    var light_msr = 0;
    var get_total_msr = function() {
        return heavy_msr * heavyUnit +
            medium_msr * mediumUnit +
            light_msr * lightUnit;
    }
    var set_heavy_msr = function(val) {
        if (val < 0) heavy_msr = 0;
        else if (val > heavyScaleDivisions) heavy_msr = heavyScaleDivisions;
        else heavy_msr = val;
    }
    var set_medium_msr = function(val) {
        if (val < 0) medium_msr = 0;
        else if (val > mediumScaleDivisions) medium_msr = mediumScaleDivisions;
        else medium_msr = val;
    }
    var set_light_msr = function(val) {
        if (val < 0) light_msr = 0;
        else if (val > lightScaleDivisions) light_msr = lightScaleDivisions;
        else light_msr = val;
    }

    var zeroError = 0;
	
	var msrInch = 0;
	var vsrInch = 0;
	var zeroErrorInch = 0;
	
    var displayInfo = false;
    var objectWidthPixel = 25;
    var drawSubDivision = false;
    var randomZeroError = true;
    var randomMainScaleDivisions = true;
    var randomVernierScaleDivision = true;
    var randomObjectWidthPixel = true;

    var canvas = document.getElementById("myCanvas");

    let detailsOpenMode = navigator.userAgent;
    let regexp = /android|iphone|kindle|ipad/i;

    let isMobileDevice = regexp.test(detailsOpenMode);

    if(isMobileDevice)
    {
        scale = Math.floor((window.innerWidth/1000)*100)/100;
		console.log("Scale = " + scale);
    }
    else
    {
        scale = 1.0;
    }
     
    var ctx = canvas.getContext("2d");
    ctx.font = "30px Arial";
    xOffset = (canvas.width/*getBaseImage().width*/) / 2; //jaw Left position
    yOffset = (canvas.height) / 2;
    
	//Add event listeners
    window.addEventListener('resize', function(ev) { return resize(ev); });
    paint();
	
	function itemloaded()
	{
        loadedItems++;
        if(loadedItems == itemsToLoad)
		{
            /*hammertime = new Hammer(document);
            hammertime.get('pinch').set({ enable: true });

            hammertime.on('pinchstart', function(ev) 
			{
                initScale=scale;
            });

            //can use pinch in pinchout separately
            hammertime.on('pinch', function(ev) 
			{
                console.log(ev.type + " scale = " + ev.scale);
                let oldScale=scale;

                let x = ev.center.x/scale;
                let y = ev.center.y/scale;
                scale=initScale*ev.scale;

                xOffset-= x*(scale-oldScale);
                yOffset-= y*(scale-oldScale);

                paint();
            }); */ 
			
			//console.log("Item loaded....");
			var defaultPrevent = function(e){ e.preventDefault() };
			//canvas.addEventListener("touchstart", defaultPrevent);
			//canvas.addEventListener("touchmove" , defaultPrevent);
			canvas.addEventListener("mousedown", defaultPrevent);
			canvas.addEventListener("mousemove", defaultPrevent);
			
			document.addEventListener('touchstart', mousePressed, false);
			document.addEventListener('touchmove', mouseDragged, false); 
			document.addEventListener('touchend', mouseReleased, false);			
			document.addEventListener("mousemove", mouseDragged, false);
			document.addEventListener("mousedown", mousePressed, false);
			document.addEventListener("mouseup", mouseReleased, false);

            canvas.addEventListener("mousewheel", mouseWheelMoved);
            window.addEventListener('keydown', onKeyEvent, false);
			window.addEventListener("orientationchange", resize()); //function() {
				//alert("the orientation of the device is now " + screen.orientation.angle);
			//});
			
        }
		
		

        paint();
    }

    function resize()
	{
        if(window.innerWidth < 10 || window.innerHeight < 10)
			return;
		        
        if(isMobileDevice)
        {
  			scale = Math.floor((window.innerWidth/1000)*100)/100;
			scale = Math.min(scale, 1);
			//scale = (window.innerWidth / imgBkGnd.width);
			//scale = Math.min(window.innerHeight / imgBkGnd.height, window.innerWidth / imgBkGnd.width);
        }
        else
        {
            scale = Math.floor(($(window).width()/1000)*100)/100;
			scale = Math.min(scale, 1);
			console.log("Scale: ", scale);
			//scale = 1.0;
        }
        
        update();
    }

    init();

    function init()
	{
        resize();
    }


    function translateHeavy(div)
	{
        set_heavy_msr(heavy_msr + div);
        update();
    }

    function translateMedium(div)
    {
        set_medium_msr(medium_msr + div);
        update();
    }

    function translateLight(div)
    {
        set_light_msr(light_msr + div);
        update();
    }

    function update(ev)
	{
        if(ev) 
			console.log(ev.value.toFixed(2));
        
        $("#heavysmallControl").val(heavy_msr * heavyUnit);
        $("#mediumsmallControl").val(medium_msr * mediumUnit);
        $("#lightsmallControl").val(light_msr);

        if (randomQuestion && get_total_msr().toFixed(1) === randomQuestion.toFixed(1)) {
            isWeightRight = true;
        } else {
            isWeightRight = false;
        }

        paint();
    }


    function paint()
	{
        ctx.lineWidth = 1.5;
        ctx.fillStyle = bgColor;
        ctx.strokeStyle = fgColor;
        ctx.fillRect(0, 0, canvas.width, canvas.height);
		
		//onsole.log("before scale = " + scale);
        //if (isMobileDevice)
		//	scale =  window.innerWidth / imgBkGnd.width;// * devicePixelRatio;
			//scale = Math.min(window.innerHeight / imgBkGnd.height, window.innerWidth / imgBkGnd.width);
		//else
		//	scale = Math.floor((window.innerWidth/1000)*100)/100;
			//scale = 1.0;
		
		//console.log("after scale = " + scale);
		
		//console.log("devicePixelRatio = " + devicePixelRatio);
		//ctx.scale(scale * 1.5, scale * 1.5);
		
        ctx.translate(xOffset , yOffset);
        ctx.save();

        //draw Base of gauge
        ctx.drawImage(imgBkGnd, -imgBkGnd.width / 2, -imgBkGnd.height / 2);

        var heavyShift = heavy_msr * heavy_pixels;
        var mediumShift = medium_msr * medium_pixels;
        var lightShift = light_msr * light_pixels;

        var xDelta = -270;
        var yDelta = -30;
        ctx.translate(xDelta, yDelta);
        ctx.save();        

		// show keyboards and input answer
		var input_val = parseFloat(input_answer).toFixed(1);
		var input_val_100 = parseInt(input_val / 100);
		var input_val_10 = parseInt((input_val - input_val_100 * 100) / 10);
		var input_val_1 = parseInt(input_val - input_val_100 * 100 - input_val_10 * 10);
		var input_val_point = (input_val - parseInt(input_val)) * 10;
		
		ctx.font = '20pt sans-serif';
		
		ctx.fillStyle = "rgb(200, 200, 200)";
		ctx.fillRect(-170, 220, 30, 40);
		ctx.fillRect(-130, 220, 30, 40);
		ctx.fillRect(-90, 220, 30, 40);
		ctx.fillRect(-50, 220, 30, 40);
		
		ctx.fillStyle = "rgb(0, 0, 0)";
		(input_val_100 != 0) && outString(-165, 240, input_val_100.toFixed(0), 0, 0);
		(input_val_100 != 0 || input_val_10 != 0) && outString(-125, 240, input_val_10.toFixed(0), 0, 0);
		outString(-85, 240, input_val_1.toFixed(0), 0, 0);
		outString(-63, 240, ".", 0, 0);
		outString(-45, 240, input_val_point.toFixed(0), 0, 0);
		outString(-15, 240, "g", 0, 0);
		
		for (let i = 0; i <= 9; i ++)
		{
			ctx.fillStyle = "rgb(255, 255, 255)";
			ctx.strokeStyle = "rgb(0, 0, 0)";
			ctx.strokeRect(40 + 50 * i - 10, 220, 40, 40);
			
			ctx.fillStyle = "rgb(0, 0, 0)";
			outString(40 + 50 * i, 240, i, 0, 0);
		}
		ctx.fillStyle = "rgb(255, 255, 255)";
		ctx.strokeStyle = "rgb(0, 0, 0)";
		ctx.strokeRect(40 + 50 * 10 - 10, 220, 40, 40);
		
		ctx.fillStyle = "rgb(0, 0, 0)";
		outString(40 + 50 * 10 - 7, 240 - 3, "←", 0, 0);

        var delta_msr_percent = (get_total_msr().toFixed(1) - (randomQuestion ? randomQuestion.toFixed(1) : 0)) / 610;

        // show tail magnify
        var zoom_size = 600;
        var magnify_area_x = 620;
        var magnify_area_y = 130;
        var magnify_area_width = 140;
        var magnify_area_height = 140;
        var magnify_area_center_x = magnify_area_x + magnify_area_width / 2;
        var magnify_area_center_y = magnify_area_y + magnify_area_height / 2;
        ctx.fillStyle = "rgb(255, 255, 255)";
        ctx.strokeStyle = "rgb(0, 0, 0)";
        ctx.translate(magnify_area_x, magnify_area_center_y);
        ctx.fillRect(0, -magnify_area_height / 2, magnify_area_width, magnify_area_height);
        ctx.strokeRect(0, -magnify_area_height / 2, magnify_area_width, magnify_area_height);
        ctx.drawImage(imgBkGndMagnify, 60, -imgBkGndMagnify.height / 2);
        if (Math.abs(2.25 * delta_msr_percent * zoom_size) < 45)
        {
            ctx.rotate(rotate_angle * delta_msr_percent * zoom_size / 2);
            if (delta_msr_percent == 0)
                ctx.drawImage(imgTailMagnifyRight, 2, - imgTailMagnifyRight.height / 2 - 1);
            else 
                ctx.drawImage(imgTailMagnify, 2, - imgTailMagnify.height / 2 - 1);
            ctx.rotate(-rotate_angle * delta_msr_percent * zoom_size / 2);
        }
        ctx.translate(-magnify_area_x, -magnify_area_center_y);
        
		// after rotation

        ctx.rotate(rotate_angle * delta_msr_percent);
		ctx.drawImage(imgRulerBase, -480 - xDelta, -165 - yDelta);
		if (delta_msr_percent == 0)
			ctx.drawImage(imgTailRight, 367 - xDelta, -147 - yDelta);
		else
			ctx.drawImage(imgTailNormal, 367 - xDelta, -147 - yDelta);

        ctx.rotate(-rotate_angle * delta_msr_percent);
		
		var pane_delta = 50 * Math.sin(2 * delta_msr_percent * Math.PI / 180);
		ctx.drawImage(imgRulerPane, -500 - xDelta, -105 - yDelta - pane_delta);
        
		// draw stone
		//randomQuestion = 610;
        var stoneWidth = randomQuestion ? imgStone.width / 610 * randomQuestion : 0;
		if (randomQuestion && stoneWidth < imgStone.width / 4) stoneWidth = imgStone.width / 4;
        var stoneHeight = randomQuestion ? imgStone.height / 610 * randomQuestion : 0;
		if (randomQuestion && stoneHeight < imgStone.height / 4) stoneHeight = imgStone.height / 4;
		stoneWidth = stoneWidth * 0.6;
		stoneHeight = stoneHeight * 0.6;
        ctx.drawImage(imgStone, -390 - xDelta - stoneWidth / 2, -50 - yDelta - pane_delta - stoneHeight, stoneWidth, stoneHeight);

		// show delta msr
		//ctx.fillStyle = "rgb(255, 255, 255)";
        ctx.font = '12pt sans-serif';
		if (delta_msr_percent == 0) {
			outString(708, -9, "0", 0, 0);
		} else if (delta_msr_percent > 0) {
			outString(708, -9, "+", 0, 0);
		} else if (delta_msr_percent < 0) {
			outString(708, -9, "-", 0, 0);
		}
		
		ctx.rotate(rotate_angle * delta_msr_percent);
		
        ctx.font = '10pt sans-serif';

        ///////draw ruler on main scale
        ctx.fillStyle = scaleColor;
        ctx.strokeStyle = scaleColor;

        // ctx.fillRect(0, 0, 20, 20);
        
		const majorTickLengthPixels = 12;
		const minorTickLengthPixels = 8;

		// medium hand
		x = -328 + mediumShift - xDelta;
		y = -145 - yDelta;
		ctx.drawImage(imgHandMedium, x, y);
		
		// heavy hand
		x = -328 + heavyShift - xDelta;
		y = -70 - yDelta;
		ctx.drawImage(imgHandHeavy, x, y);
		
		// light hand
		x = -328 + lightShift - xDelta;
		y = 8 - yDelta;
		ctx.drawImage(imgHandLight, x, y);
		
		// medium scale (top)
		x = -285.5 - xDelta, y = -125 - yDelta;

        let ticklength = 0;
        let labelGap = 1;
		
        for (let i = 0; i <= mediumScaleDivisions; i++){
			if (i % 10 == 0)
				ticklength = majorTickLengthPixels;
			else if (i % 5 == 0)
				ticklength = (majorTickLengthPixels + minorTickLengthPixels) / 2;
			else
				ticklength = minorTickLengthPixels;
				
            drawLine(x, y, x, y + ticklength);
            if (i % labelGap == 0)
				outString(x, (y + majorTickLengthPixels + 3), i * mediumUnit, 1, 0);
            x += medium_pixels;
        }
		
		// heavy scale (middle)
		x = -252.5 - xDelta, y = -52 - yDelta;

        ticklength = 0;
        labelGap = 1;
		
        for (let i = 0; i <= heavyScaleDivisions; i++){
			if (i % 10 == 0)
				ticklength = majorTickLengthPixels;
			else if (i % 5 == 0)
				ticklength = (majorTickLengthPixels + minorTickLengthPixels) / 2;
			else
				ticklength = minorTickLengthPixels;
				
            drawLine(x, y, x, y + ticklength);
            if (i % labelGap == 0)
				outString(x, (y + majorTickLengthPixels + 3), i * heavyUnit, 1, 0);
            x += heavy_pixels;
        }
		
		// light scale (bottom)
		x = -295.5 - xDelta, y = 25 - yDelta;

        ticklength = 0;
        labelGap = 10;
		
        for (let i = 0; i <= lightScaleDivisions; i++){
			if (i % 10 == 0)
				ticklength = majorTickLengthPixels;
			else if (i % 5 == 0)
				ticklength = (majorTickLengthPixels + minorTickLengthPixels) / 2;
			else
				ticklength = minorTickLengthPixels;
				
            drawLine(x, y, x, y + ticklength);
            if (i % labelGap == 0)
				outString(x, (y + majorTickLengthPixels + 3), i * lightUnit, 1, 0);
            x += light_pixels;
        }
		
        ctx.restore();

		ctx.fillStyle=fgColor;
        ctx.strokeStyle=fgColor;
		
		ctx.resetTransform();
    }

    

    function drawInfo()
	{
        //draw MSD Info and VSD Info
        ctx.fillStyle = fgColor;
        ctx.strokeStyle = fgColor;
		
        //dra MSD Hint
        let x = scaleOriginX + offsetOriginX - msd_pixels * zeroError / vernierScaleDivisions + getMainScaleReading() * msd_pixels;
        let y = scaleOriginY - majorTickLengthPixels /*+ 43*/;
        let arrowSize = 5;

        //Draw VSD Hint
        let gappixel = msd_pixels * (msr + vsr / vernierScaleDivisions);
        x = scaleOriginX + gappixel + offsetOriginX + getVernierScaleReading() * vsd_pixels;
        y = scaleOriginY + majorTickLengthPixels /*+ 43*/;

        //Draw Screw gauge Reading
        let mr = getMeasuredReading();
        cr = getCorrectedReading();
        let ze = getZeroError();
        x = scaleOriginX - 1;
        y = imgBkGnd.height+5;
        let xs = [scaleOriginX, scaleOriginX - 34, rulerWidthPixel];
        let ys=[imgBkGnd.height + 5, 4, scaleOriginY - 70];
        for(let i = 0; i < 3; i++){
            x = xs[i];
            y = ys[i];
            drawLine(x, y - 8, x, y + 8);
            drawLineWithArrows(x - 30, y, x, y, arrowSize, arrowSize, false, true);
            x += gappixel;
            drawLine(x, y - 8, x, y + 8);
            drawLineWithArrows(x, y, x + 30, y, arrowSize, arrowSize, true, false);
            x -= gappixel / 2;
            y = y + 20;
            if(ze == 0)
			{
				if (i == 1)
					outString(x, y, formatInchValue(cr), 1, 1);
				else
					outString(x, y, formatValue(cr), 1 , 1);
            }
			else if(ze > 0)
			{
                outString(x, y, formatValue(mr) + ' - ' + formatValue(ze) + " = " + formatValue(cr), 1, 1);
            }
			else
			{
                outString(x, y, formatValue(mr) + ' + ' + formatValue(-ze) + " = " + formatValue(cr), 1, 1);
            }
        }
    }


    function getZeroError()
	{
        return (zeroError / vernierScaleDivisions) * msdValue;
    }

	function formatInchValue(s)
	{
		s = s / 2.54;
        return s.toFixed(precision) + "inch";
    }
	
    function formatValue(s)
	{
        return s.toFixed(precision) + unit;
    }
	
    function getMainScaleReading()
	{
        return Math.floor((msr * vernierScaleDivisions + vsr + zeroError) / vernierScaleDivisions);
    }
	
    function getVernierScaleReading()
	{
        return mod(vsr + zeroError, vernierScaleDivisions);
    }
	
    function getMeasuredReading()
	{
        return getCorrectedReading() + getZeroError();
    }
	
    function getCorrectedReading()
	{
        return (msr + vsr / vernierScaleDivisions) * msdValue;
    }
	
    /**
     * returns +ve remainder whn a is divided by n
     * */
    function mod(a,n)
	{
        return ((a % n ) + n ) % n;
    }
	
    function drawLine(x1, y1, x2, y2)
	{
        ctx.beginPath();
        ctx.moveTo(x1, y1);
        ctx.lineTo(x2, y2);
        ctx.stroke();
    }

    // x0,y0: the line's starting point
    // x1,y1: the line's ending point
    // width: the distance the arrowhead perpendicularly extends away from the line
    // height: the distance the arrowhead extends backward from the endpoint
    // arrowStart: true/false directing to draw arrowhead at the line's starting point
    // arrowEnd: true/false directing to draw arrowhead at the line's ending point
    function drawLineWithArrows(x0, y0, x1, y1, aWidth, aLength, arrowStart, arrowEnd)
	{
        var dx = x1 - x0;
        var dy = y1 - y0;
        var angle = Math.atan2(dy, dx);
        var length = Math.sqrt(dx * dx + dy * dy);

		ctx.save();
        ctx.translate(x0, y0);
        ctx.rotate(angle);
        ctx.beginPath();
        ctx.moveTo(0, 0);
        ctx.lineTo(length, 0);
        if(arrowStart)
		{
            ctx.moveTo(aLength, -aWidth);
            ctx.lineTo(0, 0);
            ctx.lineTo(aLength, aWidth);
        }
        if(arrowEnd)
		{
            ctx.moveTo(length - aLength, -aWidth);
            ctx.lineTo(length, 0);
            ctx.lineTo(length - aLength, aWidth);
        }
        
        ctx.stroke();
        ctx.restore();
    }
	
    function outString( x, y, s, x_align, y_align) 
	{
        var fm = ctx.measureText(s);
        var h = 10;//fm.height not supported in browsers
        
		switch (y_align) 
		{
            case 0:
                y += h;
                break;
            case 1:
                y += h / 2;
                break;
            case 2:
                break;
        }
		
        switch (x_align) 
		{
            case 0:
                ctx.fillText(s, x + 3, y);
                break;
            case 1:
                ctx.fillText(s, x - fm.width / 2, y);
                break;
            case 2:
                ctx.fillText(s, x - fm.width / 2, y);
                break;
        }
    }

    function getMousePos(event)
	{
		return [ event.clientX ,event.clientY ];
    }
	
	function getTouchPos(event)
	{
		return [event.touches[0].pageX, event.touches[0].pageY];
	}

    function mousePressed( me) 
	{
        var m;

		if (me.type == 'touchstart')
			m = getTouchPos(me);
		else
			m = getMousePos(me);
		
		var doc = document.documentElement;
		var left = (window.pageXOffset || doc.scrollLeft) - (doc.clientLeft || 0);
		var top = (window.pageYOffset || doc.scrollTop)  - (doc.clientTop || 0);

        //console.log("Pressed");

		var x, y;
		
		if (me.type != 'touchstart')
		{
			//x = (m[0] - canvas.offsetLeft + left) / scale - xOffset; // - canvas.offsetLeft ;
			//y = (m[1] - canvas.offsetTop + top) / scale - yOffset; // - canvas.offsetTop + top ;
			x = (m[0] - canvas.offsetLeft + left) / scale - xOffset; // - canvas.offsetLeft ;
			y = (m[1] - canvas.offsetTop + top) / scale - yOffset; // - canvas.offsetTop + top ;
		}
		else
		{
			//x = (m[0] - canvas.offsetLeft) / scale - xOffset; // - canvas.offsetLeft ;
			//y = (m[1] - canvas.offsetTop) / scale - yOffset; // - canvas.offsetTop + top ;
			x = (m[0] - canvas.offsetLeft) / scale  - xOffset; // - canvas.offsetLeft ;
			y = (m[1] - canvas.offsetTop) / scale - yOffset; // - canvas.offsetTop + top ;
		}
		
        let shift = scaleOriginX + (msr + vsr / vernierScaleDivisions) * msd_pixels;
        var heavyShift = heavy_msr * heavy_pixels;
        var mediumShift = medium_msr * medium_pixels;
        var lightShift = light_msr * light_pixels;
		
        var delta_msr_percent = (get_total_msr().toFixed(1) - (randomQuestion ? randomQuestion.toFixed(1) : 0)) / 610;
		var heavyDelta = heavyShift * Math.tan(delta_msr_percent * rotate_angle);
		var mediumDelta = mediumShift * Math.tan(delta_msr_percent * rotate_angle);
		var lightDelta = lightShift * Math.tan(delta_msr_percent * rotate_angle);
		
		console.log("-----------------------------")
		console.log("m[0] - offsetLeft = " + (m[0] - canvas.offsetLeft + left));
		console.log("scale = " + scale);
		console.log("x = " + x + ", y = " + y);
		console.log("shift = " + shift);
		console.log("vernierScaleLengthPixels = " + vernierScaleLengthPixels);
		console.log("MediumDelta = " + mediumDelta);
		
        // medium region
        if(x > (-306 + mediumShift) &&
            x < (-306 + mediumShift + 48) &&
            y > (-143 + mediumDelta/*-135*/) &&
            y < (-85 + mediumDelta/*-93*/))
		{
            dragMode = 3;
        }
        // heavy region
		else if(x > (-306 + heavyShift) &&
            x < (-306 + heavyShift + 103) &&
            y > (-68 + heavyDelta/*-66*/) &&
            y < (-9 + heavyDelta/*-23*/))
		{
            dragMode = 2;
        }
        // light region
        else if(x > (-306 + lightShift) &&
            x < (-306 + lightShift + 25) &&
            y > (12 + lightDelta/*6*/) &&
            y < (66 + lightDelta/*46*/))
        {
            dragMode = 1;
        }
        else
        {
            dragMode = 0;
			
			if (y > (192) && y < (230))
			{
				if (x > (-238 + 50 * 10) && x < (-199 + 50 * 10)) {
					set_input_answer("Back");
				} else {
					for (let i = 0; i <= 9; i ++)
					{
						if (x > (-238 + 50 * i) && x < (-199 + 50 * i))
						{
							set_input_answer("" + i);
							break;
						}
					}
				}
			}
        }
		
        paint();
        prev_mx = m[0];
        prev_my = m[1];
        //me.preventDefault();
    }

    function mouseReleased(me) 
	{
        dragMode=0;
    }

    function mouseWheelMoved(me) 
	{
        var scroll = me.wheelDelta > 0 ? 1 : -1;
        // translateVernier(scroll);
        me.preventDefault();
    }

    function mouseDragged( me) 
	{
        if (dragMode == 0) 
			return false;
        
		var m;
		if(me.type == 'touchmove')
			m = getTouchPos(me);
		else 
			m = getMousePos(me);
        
        let dx,dy;
        dx = (m[0] - prev_mx) / scale;
        dy = (m[1] - prev_my) / scale;
        
        // move light scale
		if(dragMode == 1) 
		{
            var delta = parseInt(dx / light_pixels);
            if (delta != 0) {
                set_light_msr(light_msr + delta);
                update();

                prev_mx = m[0];
                prev_my = m[1];
            }
        }
        // move heavy scale
		else if(dragMode == 2)
		{ 
            var delta = parseInt(dx / heavy_pixels);
            if (delta != 0) {
                set_heavy_msr(heavy_msr + delta);
                update();

                prev_mx = m[0];
                prev_my = m[1];
            }
        }
        // move medium scale
        else if(dragMode == 3)
        {
            var delta = parseInt(dx / medium_pixels);
            if (delta != 0) {
                set_medium_msr(medium_msr + delta);
                update();

                prev_mx = m[0];
                prev_my = m[1];
            }
        }
		
        //me.preventDefault();
    }


    function onKeyEvent(e)
	{
		//console.log(e.keycode);
		if (e.keyCode >= 96/*'0'*/ && e.keyCode <= 105/*'9'*/)  // when using numpad...
		{
			//if (input_answer.length < 10) 
			{
				set_input_answer("" + (e.keyCode - 96));
				update();
			}
		}else if (e.keyCode >= 48/*'0'*/ && e.keyCode <= 57/*'9'*/) {
			//if (input_answer.length < 10) 
			{
				set_input_answer("" + (e.keyCode - 48));
				update();
			}
		} else if (e.keyCode == 8/*BackSpace*/) {
			set_input_answer("Back");
			update();
		} else {
			console.log(e.keyCode);
			return false;
		}
		e.preventDefault();
    }
</script>

<script>
    function toggleNavMenu() {
        var x = document.getElementById("NavMenu");
        if (x.className.indexOf("w3-show") == -1) {  
            x.className += " w3-show";
        } else { 
            x.className = x.className.replace(" w3-show", "");
        }
    }

    function toggleCategory(categoryId) {
        var category = document.getElementById(categoryId);
        if (category.className.indexOf("w3-show") == -1) {  
            category.className += " w3-show";
        } else { 
            category.className = category.className.replace(" w3-show", " w3-hide");
        }
    }
</script>

<script type="text/javascript" async="" src="https://btloader.com/tag?o=5698917485248512&upapi=true&domain=rulergame.net"></script>

<script>!function(){"use strict";var e;e=document,function(){var t,n;function r(){var t=e.createElement("script");t.src="https://cafemedia-com.videoplayerhub.com/galleryplayer.js",e.head.appendChild(t)}function a(){var t=e.cookie.match("(^|[^;]+)\s*__adblocker\s*=\s*([^;]+)");return t&&t.pop()}function c(){clearInterval(n)}return{init:function(){var e;"true"===(t=a())?r():(e=0,n=setInterval((function(){100!==e&&"false" !== t || c(), "true" === t && (r(), c()), t = a(), e++}), 50))}}}().init()}();
</script>
</body>
</html>