<!doctype html>
<html>
<head>
    
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta charset="UTF-8">
    <title>The Architectural Scale Ruler Game - Learn and Practice Reading an Architect Scale</title>
	
<meta name="description" content="With our intuitive architectural scale ruler game, you will quickly learn how to read an architect scale.">
<meta property="og:title" content="The Architectural Scale Ruler Game - Learn and Practice Reading an Architect Scale">
<meta property="og:description" content="With our intuitive architectural scale ruler game, you will quickly learn how to read an architect scale.">
<meta property="og:image" content="https://www.rulergame.net/architectural-scale.php">
<meta property="og:url" content="https://www.rulergame.net/images/og-architectural-scale.png">
<meta property="og:type" content="website">
<link rel="canonical" href="architectural-scale-game.php.html">

	
    <link rel="stylesheet" href="assets/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/css/site.css">
    <link rel="stylesheet" href="assets/css/animate.min.css">
    <link rel="stylesheet" href="architectural-scale/css/architectural-scale-ruler.css">
    <!-- <link rel="stylesheet" href="css/w3.css"> -->
    
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async="" src="gtag/js?id=G-XE0GQQH6FP"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-XE0GQQH6FP');
</script>
<!-- AdThrive Head Tag Manual -->
<script data-no-optimize="1" data-cfasync="false">
(function(w, d) {
	w.adthrive = w.adthrive || {};
	w.adthrive.cmd = w.
	adthrive.cmd || [];
	w.adthrive.plugin = 'adthrive-ads-manual';
	w.adthrive.host = 'ads.adthrive.com';var s = d.createElement('script');
	s.async = true;
	s.referrerpolicy='no-referrer-when-downgrade';
	s.src = 'https://' + w.adthrive.host + '/sites/6441cbd48ef14750ba9ecca1/ads.min.js?referrer=' + w.encodeURIComponent(w.location.href) + '&cb=' + (Math.floor(Math.random() * 100) + 1);
	var n = d.getElementsByTagName('script')[0];
	n.parentNode.insertBefore(s, n);
})(window, document);
</script>
<!-- End of AdThrive Head Tag -->

</head>
<body>
<!-- Navbar -->
<div class="z100">
    <div class="w3-bar w3-pale-green w3-card w3-left-align w3-large">
        <a class="w3-bar-item w3-button w3-padding-large rulergame-dark-green" href="javascript:void(0);" onclick="toggleNavMenu()" title="Toggle Navigation Menu">Menu</a>
        <div id="topBanner"><a href="index.htm"><img src="images/rulergame.gif" id="topBannerImage" alt="The Ruler Game - Learn to read a ruler"></a></div>
    </div>
    <div id="NavMenu" class="w3-dropdown-content w3-bar-block w3-border w3-large rulergame-dark-green z100">
	<a href="index.htm" class="w3-bar-item w3-button w3-padding-large">Home</a>
        <a href="javascript:void(0);" class="w3-bar-item w3-button w3-padding-large" onclick="toggleCategory('measuringGames')">Measuring Games</a>
        <div id="measuringGames" class="w3-hide w3-bar-block rulergame-submenu">
            <a href="new-english-ruler-game.php.html" class="w3-bar-item w3-button w3-padding-large">Inch Ruler Game</a>
            <a href="new-metric-ruler-game.php.html" class="w3-bar-item w3-button w3-padding-large">Metric Ruler Game</a>
            <a href="micrometer-game.php.html" class="w3-bar-item w3-button w3-padding-large">Micrometer Game</a>
            <a href="metric-micrometer-game.php.html" class="w3-bar-item w3-button w3-padding-large">Metric Micrometer Game</a>
			<a href="dial-caliper-game.php.html" class="w3-bar-item w3-button w3-padding-large">Dial Caliper Game</a>
			<a href="vernier-caliper-game.php.html" class="w3-bar-item w3-button w3-padding-large">Vernier Caliper Game</a>
			<a href="graduated-cylinder-game.php.html" class="w3-bar-item w3-button w3-padding-large">Graduated Cylinder Game</a>
			<a href="architectural-scale-game.php.html" class="w3-bar-item w3-button w3-padding-large">Architectural Scale Game</a>
			<a href="machinist-ruler-game.php.html" class="w3-bar-item w3-button w3-padding-large">Machinist Ruler Game</a>
			<a href="triple-beam-balance-game.php.html" class="w3-bar-item w3-button w3-padding-large">Triple Beam Balance Game</a>
        </div>
        <a href="javascript:void(0);" class="w3-bar-item w3-button w3-padding-large" onclick="toggleCategory('timeGames')">Time and Temperature Games</a>
        <div id="timeGames" class="w3-hide w3-bar-block rulergame-submenu">
            <a href="clock-game.php.html" class="w3-bar-item w3-button w3-padding-large">Clock Game</a>
            <a href="military-time-game.php.html" class="w3-bar-item w3-button w3-padding-large">Military Time Game</a>
			<a href="thermometer-game.php.html" class="w3-bar-item w3-button w3-padding-large">Thermometer Reading Game</a>
            <a href="temperature-conversion-game.php.html" class="w3-bar-item w3-button w3-padding-large">Temperature Conversion Game</a>
        </div>
        <a href="javascript:void(0);" class="w3-bar-item w3-button w3-padding-large" onclick="toggleCategory('moneyGames')">Money & Life Games</a>
        <div id="moneyGames" class="w3-hide w3-bar-block rulergame-submenu">
            <a href="money-game.php.html" class="w3-bar-item w3-button w3-padding-large">Money Counting Game</a>
            <a href="shopping-money-counting-game.php.html" class="w3-bar-item w3-button w3-padding-large">Shopping Money Counting Game</a>
            <a href="counting-back-change-game.php.html" class="w3-bar-item w3-button w3-padding-large">Counting Back Change Game</a>
			<a href="blood-pressure-game.php.html" class="w3-bar-item w3-button w3-padding-large">Blood Pressure Game</a>
			<a href="stadiometer-game.php.html" class="w3-bar-item w3-button w3-padding-large">Stadiometer Game</a>
			<a href="physician-scale-game.php.html" class="w3-bar-item w3-button w3-padding-large">Physician Scale Game</a>
			<a href="cooking-conversions-game.php.html" class="w3-bar-item w3-button w3-padding-large">Cooking Conversions Game</a>
        </div>
    </div>
</div>


<div id="mainBodyContent" class="w3-container w3-margin-top">

    <div class="container-fluid setting-section">
      
      
        <div class="vertical-center">
            <!-- <button class="btn btn-game-start" id= "btnStart">
            Play Game
            </button> -->
            <div id="buttonBar">
            <input type="button" id="btnStart" value="Play Game">
            <input type="button" id="btnSettings" value="Settings">
            </div>
        </div>
      
        
        <div id="questionBar">
            <div id="txtQuestion"><span>&nbsp;</span></div>
        </div>
  
        <div id="preferencesBox" class="w3-card w3-pale-yellow w3-border w3-border-yellow">
            <span onclick="$('#preferencesBox').slideToggle();" class="w3-button w3-display-topright">X</span>
            <header class="w3-container w3-yellow">
            <h5>Settings</h5>
            </header>
            <div class="w3-padding-small">
            <div id="timerBox" class="w3-row">
                <div class="w3-col s6 w3-right-align rulergame-align-vert"><strong>Timer:&nbsp;</strong></div>
                <div class="w3-col s6">
                    <select id="stgTimer" class="w3-select w3-border">
                        <option value="On" selected="">On</option>
                        <option value="Off">Off</option>
                    </select>  
                </div>
            </div>
            <div id="soundsBox" class="w3-row">
                <div class="w3-col s6 w3-right-align rulergame-align-vert"><strong>Sounds:&nbsp;</strong></div>
                <div class="w3-col s6">
                    <select id="stgSounds" class="w3-select w3-border">
                        <option value="On" selected="">On</option>
                        <option value="Off">Off</option>
                    </select>  
                </div>
            </div>
    
            <div id="modeSelection" class="w3-row">
                <div class="w3-col s6 w3-right-align rulergame-align-vert"><strong>Mode:&nbsp;</strong></div>
                <div class="w3-col s6">
                    <select id="stgMode" class="w3-select w3-border">
                        <option value="Game" selected="">Game</option>
                        <option value="Trainer">Training</option>
                    </select>  
                </div>
            </div>
            
            <div id="scaleSelection" class="w3-row">
                <div class="w3-col s6 w3-right-align rulergame-align-vert"><strong>Scale:&nbsp;</strong></div>
                <div class="w3-col s6">
                    <select id="stgScale" class="w3-select w3-border">
                        <option value="1">1</option>
                        <option value="1(1/2)">1(1/2)</option>
                        <option value="1/2">1/2</option>
                        <option value="1/4">1/4</option>
                        <option value="1/8">1/8</option>
                        <option value="3/4">3/4</option>
                        <option value="3/8">3/8</option>
                        <option value="3/16">3/16</option>
                        <option value="3/32">3/32</option>
                        <option value="3">3</option>
                        <option value="16">16</option>
                        <option value="Random" selected="">Random</option>
                    </select>  
                </div>
            </div>
            
            <div id="directionSelection" class="w3-row">
                <div class="w3-col s6 w3-right-align rulergame-align-vert"><strong>Inch Scale:&nbsp;</strong></div>
                <div class="w3-col s6">
                    <select id="stgDirection" class="w3-select w3-border">
                        <option value="Random" selected="">Random</option>
                        <option value="Left">Left</option>
                        <option value="Right">Right</option>
                    </select>  
                </div>
            </div>
            
            </div>
            <!-- <div id="rulerLengthMessage" class="w3-row"></div> -->
        </div>
        
  
    </div>
    
</div>
    
  
<div class="canvas-area">

    <div id="canvasArea">
        <canvas id="playerCanvas"></canvas>
        <!-- <canvas id="rulerCanvas" width="900" height="500" style="border:2px solid #000000; background-color:#fff"></canvas> -->
        <canvas id="myCanvas" width="1000" height="150" style="border:2px solid #000000; background-color:#fff"></canvas>
        <!-- <canvas id="myCanvas" style="border: 1px solid #c3c3c3;">
            Your browser does not support the HTML5 canvas tag.
        </canvas> -->
      
        <div id="strikeBoard"><span></span></div>
        <div id="cheerBoard"><span></span></div>

        <div id="detailedControl" class="w3-container w3-padding">
            <div class="w3-row">
                <div id="footsmall" class="">
                    <div class="number-input"> 
                        <div id="labelfootsmall"><b>Foot</b></div>
                        <div>
                        <button class="spinner decrement" id="btnfootdecrement">-</button>
                            <input id="footsmallControl" name="sleevemain" value="00000" onchange="DrawSleeveMainChange()">
                        <button class="spinner increment" id="btnfootincrement">+</button> 
                        </div>
                    </div>
                    <div class="number-input"> 
                        <div id="labelinchsmall"><b>Inch</b></div>
                        <div>
                        <button class="spinner decrement" id="btninchdecrement">-</button>
                            <input id="inchsmallControl" name="sleevemain" value="00000" onchange="DrawSleeveMainChange()">
                        <button class="spinner increment" id="btninchincrement">+</button> 
                        </div>
                    </div>
                </div>

            </div>
        </div> 
    </div>    
</div>

<div id="resultsBar" class="w3-container">
    <div class="w3-row">
        <div id="submitColumn" class="w3-third w3-center"> 
            <input type="button" id="btnSubmit" value="Submit Answer">
			<br>
        </div>
        <div id="displayBoard" class="w3-twothird w3-center">
            <div id="scoreColumn"><div id="txtScore"></div><div class="resultsBarLabel">SCORE</div></div>
            <div id="timerColumn"><canvas id="timerCanvas"></canvas><div class="resultsBarLabel">TIME</div></div>
            <div id="levelColumn"><canvas id="levelCanvas"></canvas><div class="resultsBarLabel">LEVEL</div></div>
            <div id="strikesColumn"><div id="txtStrikes"></div><div class="resultsBarLabel">STRIKES</div></div>                
        </div>
    </div>
    
</div>

<div id="instructionsBox" class="w3-container">
    <h1 align="center">The Architectural Scale Ruler Game - Learn and Practice Reading an Architect Scale</h1>
	
	<h2>Instructions:</h2>
                    <ul class="w3-ul">
                        <li>With this intuitive game, you can learn how to read an architect scale ruler.</li>
                        <li>This game can be played using a mouse or a touchscreen.</li>
                        <li>Press the <em><strong>Play Game</strong></em> button to start the game.</li>
                        <li>A measurement to select will appear above the architect scale.</li>
						<li>From the bottom corner of the architectural ruler, you can see the current scale.</li>
                        <li>With your mouse or finger, click/tap on the correct reading left from the zero marking and right of the zero marking. On a touchscreen device, you can also slide your finger. This is how you select the right number of foot and inches.</li>
						<li>If you cannot hit exactly the right spot(s), you can use the plus and minus icons below the architectural scale to control the scale.</li>
						<li>When you have the right answer, click/tap the "Submit Answer" button.</li>
                        <li>For each correct answer, you will be awarded points. Your score is displayed on the left side of the Results Bar located below the architectural scale.</li>
                        <li>Points are awarded based on the following table.
                              <table class="w3-table w3-bordered">
                                <tr><th>Level</th><th>Time Limit</th><th>Points</th></tr>
                                <tr><td>1</td><td>20 seconds</td><td>10</td></tr>
                                <tr><td>2</td><td>18 seconds</td><td>20</td></tr>
                                <tr><td>3</td><td>16 seconds</td><td>30</td></tr>
                                <tr><td>4</td><td>14 seconds</td><td>40</td></tr>
                                <tr><td>5</td><td>12 seconds</td><td>50</td></tr>
                                <tr><td>6</td><td>10 seconds</td><td>60</td></tr>
                                <tr><td>7</td><td>8 seconds</td><td>70</td></tr>
                                <tr><td>8</td><td>6 seconds</td><td>80</td></tr>
                                <tr><td>9</td><td>4 seconds</td><td>90</td></tr>
                                <tr><td>10</td><td>2 seconds</td><td>100</td></tr>
                              </table></li>
                        <li>Each time you correctly guess 5 measurements, you will advance to the next level. Your current level is indicated in the Results Bar.</li>
                        <li>The timer is represented to the right of the score in the Results Bar. As time passes, the bar will get shorter.</li>
                        <li>If you have not submitted a measurement when the time runs out, you will receive a strike.</li>
                        <li>For each incorrect answer, you will receive a strike. After three strikes, your game is over. The number of strikes you have received is indicated on the right side of the Results Bar below the.</li>
                        <li>Click the <em><strong>Settings</strong></em> button to adjust your preferences for the game.
                            <ul>
                                <li><strong>Timer:</strong> The default setting is On. Select Off to have unlimited time to submit your answer.</li>
                                <li><strong>Sounds:</strong> The default setting is On. Select Off to disable all game sounds.</li>
								<li><strong>Mode:</strong> By default, you're in "<i>game mode</i>." If you want to make the game easier, you can select "<i>Training</i>" mode. In the training mode, you can see the current value of the architectural scale below the ruler.</li>
								<li><strong>Scale:</strong> Select the scale. Choose from 1, 1(1/2), 1/2, 1/4, 1/8, 3/4, 3/8, 3/16, 3/32, 3, 16. Default setting is <i>Random</i>. This means that the game will randomly rotate between all the different scales.</li>
                                <li><strong>Inch Scale:</strong> You can choose whether you want the inch scale be located on the left or right. Default value is <i>Random</i>.</li>
                                <li>All the settings will revert to default and your score will reset if you refresh your browser.</li>
                            </ul></li>
                    </ul>
</div>
  
<br>
  
<footer class="w3-container w3-padding rulergame-dark-green">  
            <div class="w3-row-padding">

              <div class="w3-third">
                <h3>MEASURING GAMES</h3>
                <ul class="w3-ul">
                  <li class="w3-padding-16">
                    <a href="new-english-ruler-game.php.html" class="w3-text-white w3-hover-opacity w3-large rulergame-no-underline">New Inch Ruler Game</a><br>
                  </li>
				  <li class="w3-padding-16">
                    <a href="new-metric-ruler-game.php.html" class="w3-text-white w3-hover-opacity w3-large rulergame-no-underline">New Metric Ruler Game</a><br>
                  </li>
                  <li class="w3-padding-16">
                    <a href="v2-standard-english-ruler-game.php.html" class="w3-text-white w3-hover-opacity w3-large rulergame-no-underline">Original Inch Ruler Game</a><br>
                  </li>
				  <li class="w3-padding-16">
                    <a href="micrometer-game.php.html" class="w3-text-white w3-hover-opacity w3-large rulergame-no-underline">Inch Mictometer Game</a><br>
                  </li>
				  <li class="w3-padding-16">
                    <a href="metric-micrometer-game.php.html" class="w3-text-white w3-hover-opacity w3-large rulergame-no-underline">Metric Micrometer Game</a><br>
                  </li>
                  <li class="w3-padding-16">
                    <a href="v2-metric-ruler-game.php.html" class="w3-text-white w3-hover-opacity w3-large rulergame-no-underline">Original Metric Ruler Game</a><br>
                  </li>
				  <li class="w3-padding-16">
                    <a href="dial-caliper-game.php.html" class="w3-text-white w3-hover-opacity w3-large rulergame-no-underline">Dial Caliper Game</a><br>
                  </li>
				  <li class="w3-padding-16">
                    <a href="vernier-caliper-game.php.html" class="w3-text-white w3-hover-opacity w3-large rulergame-no-underline">Vernier Caliper Game</a><br>
                  </li>
                  <li class="w3-padding-16">
                    <a href="graduated-cylinder-game.php.html" class="w3-text-white w3-hover-opacity w3-large rulergame-no-underline">Graduated Cylinder Game</a><br>
                  </li>
				  <li class="w3-padding-16">
                    <a href="architectural-scale-game.php.html" class="w3-text-white w3-hover-opacity w3-large rulergame-no-underline">Architectural Scale Game</a><br>
                  </li>
				  <li class="w3-padding-16">
                    <a href="machinist-ruler-game.php.html" class="w3-text-white w3-hover-opacity w3-large rulergame-no-underline">Machinist Ruler Game</a><br>
                  </li>
				  <li class="w3-padding-16">
                    <a href="triple-beam-balance-game.php.html" class="w3-text-white w3-hover-opacity w3-large rulergame-no-underline">Triple Beam Balance Game</a><br>
                  </li>
                </ul>
              </div>

              <div class="w3-third">
                <h3>TIME AND TEMPERATURE GAMES</h3>
                <ul class="w3-ul">
                  <li class="w3-padding-16">
                    <a href="clock-game.php.html" class="w3-text-white w3-hover-opacity w3-large rulergame-no-underline">Clock Game</a><br>
                  </li>
				  <li class="w3-padding-16">
                    <a href="military-time-game.php.html" class="w3-text-white w3-hover-opacity w3-large rulergame-no-underline">Military Time Game</a><br>
                  </li>
				  <li class="w3-padding-16">
                    <a href="thermometer-game.php.html" class="w3-text-white w3-hover-opacity w3-large rulergame-no-underline">Thermometer Reading Game</a><br>
                  </li>
				  <li class="w3-padding-16">
                    <a href="temperature-conversion-game.php.html" class="w3-text-white w3-hover-opacity w3-large rulergame-no-underline">Temperature Conversion Game</a><br>
                  </li>
				</ul>
				<h3>MONEY AND LIFE GAMES</h3>
				<ul class="w3-ul">
				  <li class="w3-padding-16">
                    <a href="money-game.php.html" class="w3-text-white w3-hover-opacity w3-large rulergame-no-underline">Money Counting Game</a><br>
                  </li>
				  <li class="w3-padding-16">
                    <a href="shopping-money-counting-game.php.html" class="w3-text-white w3-hover-opacity w3-large rulergame-no-underline">Shopping Money Counting Game</a><br>
                  </li>
				  <li class="w3-padding-16">
                    <a href="counting-back-change-game.php.html" class="w3-text-white w3-hover-opacity w3-large rulergame-no-underline">Counting Back Change Game</a><br>
                  </li>
				  <li class="w3-padding-16">
                    <a href="blood-pressure-game.php.html" class="w3-text-white w3-hover-opacity w3-large rulergame-no-underline">Blood Pressure Game</a><br>
                  </li>
				  <li class="w3-padding-16">
                    <a href="stadiometer-game.php.html" class="w3-text-white w3-hover-opacity w3-large rulergame-no-underline">Stadiometer Game</a><br>
                  </li>
				  <li class="w3-padding-16">
                    <a href="physician-scale-game.php.html" class="w3-text-white w3-hover-opacity w3-large rulergame-no-underline">Physician Scale Game</a><br>
                  </li>
				  <li class="w3-padding-16">
                    <a href="cooking-conversions-game.php.html" class="w3-text-white w3-hover-opacity w3-large rulergame-no-underline">Cooking Conversions Game</a><br>
                  </li>
                </ul>
              </div>

              <div class="w3-third">
                <h3>CONTACT ME</h3>
                  <p class="w3-xxlarge w3-margin-top w3-margin-bottom">
                    <a href="privacy-policy.php.html#contact" class="w3-text-white w3-hover-opacity"><img src="contact-button.png" alt="Contact button"></a>
                    <a href="https://www.facebook.com/RulerGame/" class="w3-text-white w3-hover-opacity" target="_blank"><img src="facebook-button.png" alt="Facebook button"></a>
                  </p>                   
                  <p>Spears Technologies, Inc.<br>
                    Attn: The Ruler Game<br>
                    576 N. Birdneck Rd. #178<br>
                    Virginia Beach, VA 23451</p>
              </div>

            </div>
<div class="rulergame-dark-green w3-center w3-padding w3-border-top">Copyright &copy; 2025  by RulerGame.net and Ricky D. Spears. All Rights Reserved. <a href="privacy-policy.php.html" class="w3-text-white w3-hover-opacity">Privacy Policy</a><br><br><br></div>
</footer>


<script src="assets/js/jquery.min.js">  </script>
<script src="assets/js/jquery-3.6.0.min.js">  </script>
<script src="assets/js/bootstrap.min.js">  </script>
<script src="architectural-scale/js/architectural_scale_ruler.js">  </script>
<script type='text/javascript'>
	var msrSelected = 0;
    var vsrSelected = 0;
	var gameStarted = 0;
    /*drawing offset*/
    var scale;
    var xOffset;
    var yOffset;

    var prev_mx, prev_my; //prev mouse positions
    // var bgColor = "rgb(0,64,84)";
    var bgColor = "rgb(255,255,255)";
    var fgColor = "orange";//rgb(255,255,255)";
    const scaleColor = "black";
    const mercuryColor = "rgb(210,62,72)";
    const whiteColor = "white";

    var loadedItems = 0;
    const itemsToLoad = 1;
    
    var imgBase = new Image();
    imgBase.src = "https://www.rulergame.net/architectural-scale/images/architectural_scale_ruler.jpg"
    imgBase.onload = itemloaded;
    
    const rulerWidthPixel = 915;
    const MAJOR_TICK_LENGTH_PIXELS = 45;
    const MIDDLE_TICK_LENGTH_PIXELS = 25;
	const MIDDLE_TICK_LENGTH_PIXELS1 = 37;
    const MINOR_TICK_LENGTH_PIXELS = 15;
	const SCALE_FILL_HEIGHT = 20;
    const MARK_LENGTH = 30;

    const unit = "cm";
		
    var mainScaleDivisions = 50;
	
    var precision = 3;
    // var LC = 0;
    var msr = 0;
    var vsr = 0;
    var zeroError = 0;
	
    const scaleOriginX = 0; //jaw Left position
    // const scaleOriginY0 = 105; //105; //scale top position
    const scaleOriginY = 0; //162; //scale bottom position
    var offsetOriginX = 0; //distance of scale origin level from scaleOriginX
    var offsetOriginY = -MAJOR_TICK_LENGTH_PIXELS; //distance of scale origin level from scaleOriginY

    var canvas = document.getElementById("myCanvas");

    let detailsOpenMode = navigator.userAgent;
    let regexp = /android|iphone|kindle|ipad/i;

    let isMobileDevice = regexp.test(detailsOpenMode);

	//canvas.width = window.innerWidth;
	//canvas.height = parseInt(window.width * 5 / 9, 10);
    {
        scale = 1.0;
		//if (getBaseImage().height > canvas.height - 150)
		{
			// scale = (canvas.height - 150) / getBaseImage().height;
			scale = window.innerWidth / 1000;
		}
		
		if (scale > 1.0)
			scale = 1;
		
    }
     
    var ctx = canvas.getContext("2d");
    ctx.font = "30px Arial";
    xOffset = (canvas.width/*getBaseImage().width*/) / 2; //jaw Left position
    yOffset = (canvas.height) / 2;

	//Add event listeners
    window.addEventListener('resize', function(ev) { return resize(ev); });
    paint();
    
	function itemloaded()
	{
        loadedItems++;
        if(loadedItems == itemsToLoad)
		{			
			//console.log("Item loaded....");
			var defaultPrevent = function(e){ e.preventDefault() };
			
			canvas.addEventListener("mousedown", defaultPrevent);
			canvas.addEventListener("mousemove", defaultPrevent);
			
			document.addEventListener('touchstart', mousePressed, false);
			document.addEventListener('touchmove', mouseDragged, false); 
			document.addEventListener('touchend', mouseReleased, false);		
			document.addEventListener("mousemove", mouseDragged, false);
			document.addEventListener("mousedown", mousePressed, false);
			document.addEventListener("mouseup", mouseReleased, false); 

            canvas.addEventListener("mousewheel", mouseWheelMoved);
            window.addEventListener('keydown', onKeyEvent, false);
			window.addEventListener("orientationchange", resize());
			//window.addEventListener("onresize", resize());
        }
		
        paint();
    }

    function resize()
	{
        if(window.innerWidth < 10 || window.innerHeight < 10)
			return;
		        
		var width;
		var height;
		width = window.innerWidth;
		height = window.innerHeight;

        {
            scale = 1.0;

			{
				// scale = (canvas.height - 150) / getBaseImage().height;
				scale = window.innerWidth / 1000;
			}
			if (scale > 1.0)
				scale = 1.0;
        }
        
		msr = 0;
		//console.log("resize scale = " + scale);
        update();
    }

    init();

    function init()
	{
        resize();
    }

    function translateMsd(div)
	{
		if (div == 0)
			return;
		msr = parseInt(msr, 10) + div;
		
		if(msr <= 0)
			msr = 0;
		if(msr >= getMainScaleDivisions())
			msr = getMainScaleDivisions();

        update();
    }

    function translateVsd(div)
    {
        if (div == 0)
            return;
        vsr = vsr + div;
		
        if(vsr <= 0)
            vsr = 0;
        if(vsr >= getSubMainScaleDivisions() * getSubMsdUnit())
            vsr = getSubMainScaleDivisions() * getSubMsdUnit();
		
        update();
    }

    function update(ev)
	{
        if(ev) 
			console.log(ev.value.toFixed(2));
        
        paint();
    }

    function paint()
	{
        ctx.lineWidth = 1.5;
        ctx.fillStyle = bgColor;
        ctx.strokeStyle = fgColor;
        ctx.fillRect(0, 0, canvas.width, canvas.height);
		
        ctx.font = '10pt sans-serif';

		{
			scale = 1.0;
			{
				// scale = (canvas.height - 150) / getBaseImage().height;
				scale = window.innerWidth / 1000;
				if (scale > 1.0)
					scale = 1.0;
			}
		}
        ctx.translate(xOffset , yOffset);
        ctx.save();

        ctx.strokeStyle = scaleColor;
        ctx.fillStyle = scaleColor;
        ctx.font = "20px bold";
        var old_line_width = ctx.lineWidth;
        ctx.lineWidth = 1;

        x = nDirection * (-canvas.width / 2 + 50);
        y = canvas.height / 2 - 30;
        outString(x, y, stgScale, 1, 0);
        
        let msd_shift = nDirection * parseInt(msr, 10) * getMsdPixels();
        let vsd_shift = nDirection * (parseInt(vsr / getSubMsdUnit()) * getSubMsdUnit()) / getSubMsdUnit() * getSubMsdPixels();
		
		// getCorrectedReading();
		
        // draw Base of gauge
        // ctx.drawImage(getBaseImage(), 0, 0);

		var mainScaleDivisions = getMainScaleDivisions();
        var subMainScaleDivisions = getSubMainScaleDivisions();
        var msd_pixels = getMsdPixels();
        var sub_msd_pixels = getSubMsdPixels();
		
		offsetOriginX = (mainScaleDivisions * msd_pixels + subMainScaleDivisions * sub_msd_pixels) / -2 + subMainScaleDivisions * sub_msd_pixels;
        ctx.translate(nDirection * (scaleOriginX + offsetOriginX), scaleOriginY + offsetOriginY);
        
        ctx.strokeStyle = scaleColor;
        ctx.fillStyle = mercuryColor;
        var old_line_width = ctx.lineWidth;
        ctx.lineWidth = 1;

        x = 0;
        y = 0;
        
        /* draw ruler on main scale */
        var ruler_right_x, ruler_left_x;

        let labelGap = getLabelGap();
        let subLabelGap = getSubLabelGap();
		let showGap = getShowGap();
        let subShowGap = getSubShowGap();
        
        // for the ruler...
        var nDelta = 0;
        let ticklength = 0;

		ctx.fillStyle = "rgb(51, 153, 102)";
		ctx.fillRect(0, y, msd_shift, y + MARK_LENGTH);
		
		ctx.fillStyle = "rgb(21, 94, 13)";
		ctx.fillRect(-vsd_shift, y, vsd_shift, y + MARK_LENGTH);
		
		ctx.strokeStyle = scaleColor;
		ctx.fillStyle = scaleColor;
        ctx.font = "20px bold";
        for (let i = 0; i <= mainScaleDivisions; i++)
        {
            if (i == mainScaleDivisions)
                ruler_right_x = x;

            ticklength = getTickLength(i);

            drawLine(x, y, x, y + ticklength);
			
            if (i % labelGap == showGap)
            {
				outString(x, y + MAJOR_TICK_LENGTH_PIXELS + 3, i, 1, 0);
            }
            x += nDirection * msd_pixels;
        }
		
        x = 0;
        for (let i = 0; i <= subMainScaleDivisions; i++)
        {
            if (i == subMainScaleDivisions)
                ruler_left_x = x;

            ticklength = getSubTickLength(i);

            drawLine(x, y, x, y + ticklength);
            
            if (i % subLabelGap == subShowGap && (i != subMainScaleDivisions || stgScale == "16"))
            {
				outString(x, y + MAJOR_TICK_LENGTH_PIXELS + 3, i * getSubMsdValue(), 1, 0);
            }
            x -= nDirection * sub_msd_pixels;
        }

		x -= 50;

        drawLine(ruler_left_x, y, ruler_right_x, y);

        ctx.lineWidth = old_line_width;

		//ctx.strokestyle = scaleColor;
		//ctx.fillStyle = scaleColor;

        ////////////////
        ctx.fillStyle=fgColor;
        ctx.font = '12pt sans-serif';

        // if (stgMode == "Trainer")
        {
			let msd_shift = parseInt(msr, 10);
			let vsd_shift = getFractionStr(vsr);
	
            $("#footsmallControl").val((msd_shift).toFixed(0));
			$("#inchsmallControl").val(vsd_shift);
        }
		
		ctx.resetTransform();
    }

    function getBaseImage()
    {
        return imgBase;
    }

    /* Count of scales */
    function getMainScaleDivisions()
    {
		var cnt = parseInt((canvas.width - 80 - getSubMainScaleDivisions() * getSubMsdPixels()) / getMsdPixels());
        return cnt;
        /*if (stgScale == "1")
            return 11;
        if (stgScale == "1(1/2)")
            return 5;
        if (stgScale == "1/2")
            return 21;
        if (stgScale == "1/4")
            return 48;
        if (stgScale == "1/8")
            return 90;
        if (stgScale == "3/4")
            return 15;
        if (stgScale == "3/8")
            return 30;
        if (stgScale == "3/16")
            return 60;
        if (stgScale == "3/32")
            return 24;
        if (stgScale == "3")
            return 1;
        if (stgScale == "16")
            return 7;
        return 11;*/
    }

    function getSubMainScaleDivisions()
    {
        if (stgScale == "1")
            return 48;
        if (stgScale == "1(1/2)")
            return 48;
        if (stgScale == "1/2")
            return 24;
        if (stgScale == "1/4")
            return 12;
        if (stgScale == "1/8")
            return 6;
        if (stgScale == "3/4")
            return 24;
        if (stgScale == "3/8")
            return 12;
        if (stgScale == "3/16")
            return 12;
        if (stgScale == "3/32")
            return 6;
        if (stgScale == "3")
            return 96;
        if (stgScale == "16")
            return 192;
        return 12;
    }

    /* Length of scale */
    function getTickLength(i)
    {
        if (stgScale == "1")
            return MAJOR_TICK_LENGTH_PIXELS
        if (stgScale == "1(1/2)")
            return MAJOR_TICK_LENGTH_PIXELS
        if (stgScale == "1/2")
        {
            if (i % 2 == 0)
                return MAJOR_TICK_LENGTH_PIXELS;
            else
                return MIDDLE_TICK_LENGTH_PIXELS1;
        }
        if (stgScale == "1/4")
        {
            if (i % 2 == 0)
                return MAJOR_TICK_LENGTH_PIXELS;
            else
                return MIDDLE_TICK_LENGTH_PIXELS1;
        }
        if (stgScale == "1/8")
        {
            if (i % 2 == 0)
                return MAJOR_TICK_LENGTH_PIXELS;
            else
                return MINOR_TICK_LENGTH_PIXELS;
        }
        if (stgScale == "3/4")
            return MAJOR_TICK_LENGTH_PIXELS;
        if (stgScale == "3/8")
            return MAJOR_TICK_LENGTH_PIXELS;
        if (stgScale == "3/16")
        {
            if (i % 2 == 0)
                return MAJOR_TICK_LENGTH_PIXELS;
            else
                return MINOR_TICK_LENGTH_PIXELS;
        }
        if (stgScale == "3/32")
        {
            if (i % 4 == 0)
                return MAJOR_TICK_LENGTH_PIXELS;
            else
                return MINOR_TICK_LENGTH_PIXELS;
        }
        if (stgScale == "3")
            return MAJOR_TICK_LENGTH_PIXELS;
        if (stgScale == "16")
            return MAJOR_TICK_LENGTH_PIXELS;
        return MAJOR_TICK_LENGTH_PIXELS;
    }

    function getSubTickLength(i)
    {
        if (i < 0)
            return -1;
        if (i == 0 || i == getSubMainScaleDivisions())
            return MAJOR_TICK_LENGTH_PIXELS;

		if (stgScale == "1")
		{
			if (i % 12 == 0) {
				return MAJOR_TICK_LENGTH_PIXELS;
			} else if (i % 4 == 0) {
				return MIDDLE_TICK_LENGTH_PIXELS1;
			} else if (i % 2 == 0) {
				return MIDDLE_TICK_LENGTH_PIXELS;
			} else {
				return MINOR_TICK_LENGTH_PIXELS;
			}
		}
        if (stgScale == "1(1/2)")
        {
            if (i % 4 == 0) {
                return MIDDLE_TICK_LENGTH_PIXELS1;
            } else if (i % 2 == 0) {
                return MIDDLE_TICK_LENGTH_PIXELS;
            } else {
                return MINOR_TICK_LENGTH_PIXELS;
            }
        }
        if (stgScale == "1/2" || stgScale == "3/4")
        {
            if (i % 6 == 0) {
                return MIDDLE_TICK_LENGTH_PIXELS1;
            } else if (i % 2 == 0) {
                return MIDDLE_TICK_LENGTH_PIXELS;
            } else {
                return MINOR_TICK_LENGTH_PIXELS;
            }
        }
        if (stgScale == "1/4" || stgScale == "3/8")
        {
            if (i % 6 == 0) {
                return MIDDLE_TICK_LENGTH_PIXELS1;
            } else if (i % 3 == 0) {
                return MIDDLE_TICK_LENGTH_PIXELS;
            } else {
                return MINOR_TICK_LENGTH_PIXELS;
            }
        } else if (stgScale == "1/8") {
            if (i % 3 == 0) {
                return MIDDLE_TICK_LENGTH_PIXELS;
            } else {
                return MINOR_TICK_LENGTH_PIXELS;
            }
        } else if (stgScale == "3/16" || stgScale == "3/32") {
            if (i % 3 == 0) {
                return MIDDLE_TICK_LENGTH_PIXELS;
            } else {
                return MINOR_TICK_LENGTH_PIXELS;
            }
        } else if (stgScale == "3") {
            if (i % 8 == 0) {
                return MAJOR_TICK_LENGTH_PIXELS;
            } else if (i % 4 == 0) {
                return MIDDLE_TICK_LENGTH_PIXELS1;
            } else if (i % 2 == 0) {
                return MIDDLE_TICK_LENGTH_PIXELS;
            } else {
                return MINOR_TICK_LENGTH_PIXELS;
            }
        } else if (stgScale == "16") {
			if (i % 16 == 0) {
				return MAJOR_TICK_LENGTH_PIXELS;
			} else if (i % 4 == 0) {
				return MIDDLE_TICK_LENGTH_PIXELS1;
			} else if (i % 2 == 0) {
				return MIDDLE_TICK_LENGTH_PIXELS;
			} else {
				return MINOR_TICK_LENGTH_PIXELS;
			}
		}
        return MAJOR_TICK_LENGTH_PIXELS;
    }

    function getMsdPixels()
    {
        //var mainScaleLengthPixels = 900;
        //var msd_pixels = mainScaleLengthPixels / getMainScaleDivisions();
        //return msd_pixels;
		return getSubMsdPixels() * getSubMainScaleDivisions();
    }

    function getSubMsdPixels()
    {
        var per_inch = 375;
        var scale_len = 1;
        if (stgScale == "1") {
			per_inch = 210;
            scale_len = 1;
		}
        if (stgScale == "1(1/2)") {
			per_inch = 120;
            scale_len = 1.5;
		}
        if (stgScale == "1/2") {
			per_inch = 240;
            scale_len = 0.5;
		}
        if (stgScale == "1/4")
            scale_len = 0.25;
        if (stgScale == "1/8")
            scale_len = 0.125;
        if (stgScale == "3/4") {
			per_inch = 200;
            scale_len = 0.75;
		}
        if (stgScale == "3/8") {
			per_inch = 320;
            scale_len = 0.375;
		}
        if (stgScale == "3/16")
            scale_len = 0.1875;
        if (stgScale == "3/32") {
			per_inch = 450;
            scale_len = 0.09375;
		}
        if (stgScale == "3") {
			per_inch = 90;
            scale_len = 3;
		}
        if (stgScale == "16") {
            scale_len = 2.5;
		}
        var sub_msd_pixels = per_inch * scale_len / getSubMainScaleDivisions();
        return sub_msd_pixels;
    }

    function getMsdValue()
    {
        return 1;
    }

    function getSubMsdValue()
    {
		if (isUnitTwice(stgScale))
		{
			return 2;
		}
		if (stgScale == "1")
		{
			return 0.25;
		}
		if (stgScale == "1(1/2)")
		{
			return 0.25;
		}
		if (stgScale == "1/2" || stgScale == "3/4")
		{
			return 0.5;
		}
        if (stgScale == "3")
        {
            return 0.125;
        }
		if (stgScale == "16")
		{
			return 0.0625;
		}
        return 1;
    }
	
	function getSubMsdUnit()
	{
		if (isUnitTwice(stgScale))
		{
			return 2;
		}
		if (stgScale == "1")
		{
			return 0.25;
		}
		if (stgScale == "1(1/2)")
		{
			return 0.25;
		}
		if (stgScale == "1/2" || stgScale == "3/4")
		{
			return 0.5;
		}
		if (stgScale == "3")
		{
			return 0.125;
		}
		if (stgScale == "16")
		{
			return 0.0625;
		}
		
		return 1;
	}

    function getCylinderHeight()
    {
		return 280;
    }

    function getLabelGap()
    {
        if (stgScale == "1")
            return 1;
        if (stgScale == "1(1/2)")
            return 2;
        if (stgScale == "1/2")
            return 2;
        if (stgScale == "1/4")
            return 2;
        if (stgScale == "1/8")
            return 4;
        if (stgScale == "3/4")
            return 1;
        if (stgScale == "3/8")
            return 2;
        if (stgScale == "3/16")
            return 2;
        if (stgScale == "3/32")
            return 4;
        if (stgScale == "3")
            return 1;
        if (stgScale == "16")
            return 1;
        return 1;
    }

    function getSubLabelGap()
    {
        if (stgScale == "1")
            return 12;
        if (stgScale == "1(1/2)")
            return 12;
        if (stgScale == "1/2")
            return 6;
        if (stgScale == "1/4")
            return 12;
        if (stgScale == "1/8")
            return 12;
        if (stgScale == "3/4")
            return 12;
        if (stgScale == "3/8")
            return 12;
        if (stgScale == "3/16")
            return 12;
        if (stgScale == "3/32")
            return 12;
        if (stgScale == "3")
            return 24;
        if (stgScale == "16")
            return 16;
        return 6;
    }
	
	function getShowGap()
	{
        return 0;
	}

    function getSubShowGap()
    {
		if (stgScale == "1")
			return 0;
		if (stgScale == "1(1/2)")
			return 0;
        if (stgScale == "3")
            return 0;
        if (stgScale == "16")
            return 0;
        return -1;
    }

    function getZeroError()
	{
    	return 0;
    }

	function formatInchValue(s)
	{
		s = s / 2.54;
        return s.toFixed(precision) + "inch";
    }
	
    function formatValue(s)
	{
		//s = Math.round(s * 1000) / 1000;
		s = parseInt(s * 10, 10) / 10;
		
        return s.toFixed(0); // + unit;
    }
	
    /* function getCorrectedReading()
	{
        cr = parseInt(msr, 10) * getMsdValue();
        vr = parseInt(vsr, 10) * getSubMsdValue();
    }*/

    /**
     * returns +ve remainder whn a is divided by n
     * */
    function mod(a,n)
	{
        return ((a % n ) + n ) % n;
    }
	
    function drawLine(x1, y1, x2, y2)
	{
        ctx.beginPath();
        ctx.moveTo(x1, y1);
        ctx.lineTo(x2, y2);
        ctx.stroke();
    }

    // x0,y0: the line's starting point
    // x1,y1: the line's ending point
    // width: the distance the arrowhead perpendicularly extends away from the line
    // height: the distance the arrowhead extends backward from the endpoint
    // arrowStart: true/false directing to draw arrowhead at the line's starting point
    // arrowEnd: true/false directing to draw arrowhead at the line's ending point
    function drawLineWithArrows(x0, y0, x1, y1, aWidth, aLength, arrowStart, arrowEnd)
	{
        var dx = x1 - x0;
        var dy = y1 - y0;
        var angle = Math.atan2(dy, dx);
        var length = Math.sqrt(dx * dx + dy * dy);

		ctx.save();
        ctx.translate(x0, y0);
        ctx.rotate(angle);
        ctx.beginPath();
        ctx.moveTo(0, 0);
        ctx.lineTo(length, 0);
        if(arrowStart)
		{
            ctx.moveTo(aLength, -aWidth);
            ctx.lineTo(0, 0);
            ctx.lineTo(aLength, aWidth);
        }
        if(arrowEnd)
		{
            ctx.moveTo(length - aLength, -aWidth);
            ctx.lineTo(length, 0);
            ctx.lineTo(length - aLength, aWidth);
        }
        
        ctx.stroke();
        ctx.restore();
    }
	
    function outString( x, y, s, x_align, y_align) 
	{
        var fm = ctx.measureText(s);
        var h = 20;//fm.height not supported in browsers
        
		switch (y_align) 
		{
            case 0:
                y += h;
                break;
            case 1:
                y += h / 2;
                break;
            case 2:
                break;
        }
		
        switch (x_align) 
		{
            case 0:
                ctx.fillText(s, x + 3, y);
                break;
            case 1:
                ctx.fillText(s, x - fm.width / 2, y);
                break;
            case 2:
                ctx.fillText(s, x - fm.width, y);
                break;
        }
    }

    function getMousePos(event)
	{
		return [ event.clientX ,event.clientY ];
    }
	
	function getTouchPos(event)
	{
		return [event.touches[0].pageX, event.touches[0].pageY];
	}

    function mousePressed( me) 
	{
        if (msrSelected == 1 || vsrSelected == 1)
            return;

		var m;
		if(me.type == 'touchstart')
			m = getTouchPos(me);
		else 
			m = getMousePos(me);

		var doc = document.documentElement;
		var left = (window.pageXOffset || doc.scrollLeft) - (doc.clientLeft || 0);
		var top = (window.pageYOffset || doc.scrollTop)  - (doc.clientTop || 0);

		var x, y;
		var isMobile = 0;
		if (me.type != 'touchstart')
		{
			x = (m[0] - canvas.offsetLeft + left) / scale; // - canvas.offsetLeft ;
			y = (m[1] - canvas.offsetTop + top) / scale; // - canvas.offsetTop + top ;
			/*x = m[0] / scale;
			y = m[1] / scale;*/
		}
		else
		{
			x = (m[0] - canvas.offsetLeft) / scale; // - canvas.offsetLeft ;
			y = (m[1] - canvas.offsetTop) / scale; // - canvas.offsetTop + top ; */
			/*x = m[0] / scale;
			y = m[1] / scale;*/
			
			isMobile = 1;
		}

        msrSelected = vsrSelected = 0;

        var xMiddleBound = xOffset + nDirection * offsetOriginX;
        var xBoundRight, xBoundLeft;
        if (nDirection === 1) {
            xBoundRight = xMiddleBound + getMainScaleDivisions() * getMsdPixels() + nDirection * 10;
            xBoundLeft = xMiddleBound - getSubMainScaleDivisions() * getSubMsdPixels() - nDirection * 10;
        } else {
            xBoundLeft = xMiddleBound - getMainScaleDivisions() * getMsdPixels() + nDirection * 10;
            xBoundRight = xMiddleBound + getSubMainScaleDivisions() * getSubMsdPixels() - nDirection * 10;
        }
        var yBoundTop = yOffset + scaleOriginY + 60;
        var yBoundBottom = yOffset + scaleOriginY - 60;
        if (yBoundBottom < y && y < yBoundTop &&
            x < xBoundRight && x > xBoundLeft) {
            if ((x > xMiddleBound) === (nDirection > 0)) {
                msrSelected = 1;
                msr = Math.abs(x - xMiddleBound) / getMsdPixels();

                msrValueSelected = true;
            } else if ((x < xMiddleBound) === (-nDirection < 0)) {
                vsrSelected = 1;
                vsr = parseInt((Math.abs(xMiddleBound - x) / getSubMsdPixels())) * getSubMsdUnit();
				if (isUnitTwice(stgScale)) {
					vsr = parseInt(vsr / 2) * 2;
				}

                vsrValueSelected = true;
            }
        }

        if (msr >= getMainScaleDivisions())
            msr = getMainScaleDivisions();
        if (msr < 0)
            msr = 0;

        if (vsr >= getSubMainScaleDivisions() * getSubMsdUnit())
            vsr = getSubMainScaleDivisions() * getSubMsdUnit();
        if (vsr < 0)
            vsr = 0;
        
		/*console.log("-----------------------------");
		console.log("x : " +x);
        console.log("y : " +y);
        console.log("x bound left : " +xBoundLeft);
        console.log("x bound right : " +xBoundRight);
        console.log("y bound bottom : " +yBoundBottom);
        console.log("y bound top : " +yBoundTop);*/
		
		// if (isMobile)
		// {
		// 	if (y > yBoundBottom && y < yBoundTop &&
		// 			x > xBoundLeft && x < xBoundRight)
		// 	{
		// 		msr = (x - xBoundLeft) / getMsdPixels();
			
		// 		if(msr >= getMainScaleDivisions())
		// 		{
		// 			msr = getMainScaleDivisions();
		// 		}
				
		// 		if (msr < 0)
		// 		    msr = 0;
				
		// 		update();
		// 	}
		// }
		
		//me.preventDefault();
		paint();
    }

    function mouseReleased(me) 
	{
        msrSelected = vsrSelected = 0;
    }

    function mouseWheelMoved(me) 
	{
        // var scroll = me.wheelDelta > 0 ? 1 : -1;
        // translateVernier(scroll);
        
		me.preventDefault();
    }

    function mouseDragged( me) 
	{
		if (msrSelected != 1 && vsrSelected != 1 && msrValueSelected && vsrValueSelected)
			return;
			
		var m;
		if(me.type == 'touchmove')
			m = getTouchPos(me);
		else 
			m = getMousePos(me);

		var doc = document.documentElement;
		var left = (window.pageXOffset || doc.scrollLeft) - (doc.clientLeft || 0);
		var top = (window.pageYOffset || doc.scrollTop)  - (doc.clientTop || 0);

		var x, y;
		
		if (me.type != 'touchstart')
		{
			x = (m[0] - canvas.offsetLeft + left) / scale; // - canvas.offsetLeft ;
			y = (m[1] - canvas.offsetTop + top) / scale; // - canvas.offsetTop + top ;*/
			/*x = (m[0] - canvas.offsetLeft) / scale;
			y = (m[1] - canvas.offsetTop) / scale;*/
		}
		else
		{
			x = (m[0] - canvas.offsetLeft) / scale; // - canvas.offsetLeft ;
			y = (m[1] - canvas.offsetTop) / scale; // - canvas.offsetTop + top ; */
			/*x = m[0] / scale;
			y = m[1] / scale;*/
		}		

        var xMiddleBound = xOffset + nDirection * offsetOriginX;
        var xBoundRight, xBoundLeft;
        if (nDirection === 1) {
            xBoundRight = xMiddleBound + getMainScaleDivisions() * getMsdPixels() + nDirection * 10;
            xBoundLeft = xMiddleBound - getSubMainScaleDivisions() * getSubMsdPixels() - nDirection * 10;
        } else {
            xBoundLeft = xMiddleBound - getMainScaleDivisions() * getMsdPixels() + nDirection * 10;
            xBoundRight = xMiddleBound + getSubMainScaleDivisions() * getSubMsdPixels() - nDirection * 10;
        }
        var yBoundTop = yOffset + scaleOriginY + 60;
        var yBoundBottom = yOffset + scaleOriginY - 60;
        if (yBoundBottom < y && y < yBoundTop &&
            x < xBoundRight && x > xBoundLeft) {
            if ((x > xMiddleBound) === (nDirection > 0)) {
                if (msrSelected == 1 || !msrValueSelected)
                    msr = Math.abs(x - xMiddleBound) / getMsdPixels();
            } else if ((x < xMiddleBound) === (-nDirection < 0)) {
                if (vsrSelected == 1 || !vsrValueSelected) {
                    vsr = parseInt((Math.abs(xMiddleBound - x) / getSubMsdPixels())) * getSubMsdUnit();
					if (isUnitTwice(stgScale)) {
						vsr = parseInt(vsr / 2) * 2;
					}
				}
            }
        }

		if (msr >= getMainScaleDivisions())
			msr = getMainScaleDivisions();
		if (msr < 0)
			msr = 0;

        if (vsr >= getSubMainScaleDivisions() * getSubMsdUnit())
            vsr = getSubMainScaleDivisions() * getSubMsdUnit();
        if (vsr < 0)
            vsr = 0;
		
/*		console.log("-----------------------------");
		console.log("x : " +x);
        console.log("y : " +y);
        console.log("x bound left : " +xBoundLeft);
        console.log("x bound right : " +xBoundRight);
        console.log("y bound bottom : " +yBoundBottom);
        console.log("y bound top : " +yBoundTop); */
		paint();
    }


    function onKeyEvent(e)
	{
  //       if(e.keyCode==39 ||e.keyCode==38)
		// {
  //           translateVernier(1);
  //       }
  //       else if (e.keyCode==37||e.keyCode==40)
		// {
  //           translateVernier(-1);
  //       }
  //       else if (e.keyCode==33) //page up
		// {
  //           scale *= 1.05;
  //           update();
  //       }
  //       else if (e.keyCode==34) //page down
		// {
  //           scale *= 0.96;
  //           update();
  //       }
		// else 
		// {
  //           return false;
  //       }

        // e.preventDefault();
    }
</script>

<script>
    function toggleNavMenu() {
        var x = document.getElementById("NavMenu");
        if (x.className.indexOf("w3-show") == -1) {  
            x.className += " w3-show";
        } else { 
            x.className = x.className.replace(" w3-show", "");
        }
    }

    function toggleCategory(categoryId) {
        var category = document.getElementById(categoryId);
        if (category.className.indexOf("w3-show") == -1) {  
            category.className += " w3-show";
        } else { 
            category.className = category.className.replace(" w3-show", " w3-hide");
        }
    }
</script>

<script type="text/javascript" async="" src="https://btloader.com/tag?o=5698917485248512&upapi=true&domain=rulergame.net"></script>

<script>!function(){"use strict";var e;e=document,function(){var t,n;function r(){var t=e.createElement("script");t.src="https://cafemedia-com.videoplayerhub.com/galleryplayer.js",e.head.appendChild(t)}function a(){var t=e.cookie.match("(^|[^;]+)\s*__adblocker\s*=\s*([^;]+)");return t&&t.pop()}function c(){clearInterval(n)}return{init:function(){var e;"true"===(t=a())?r():(e=0,n=setInterval((function(){100!==e&&"false" !== t || c(), "true" === t && (r(), c()), t = a(), e++}), 50))}}}().init()}();
</script>
</body>
</html>